(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{237:function(s,e,t){s.exports=t.p+"assets/img/getting-started.a1278e29.png"},531:function(s,e,t){"use strict";t.r(e);var n=t(10),a=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("header-table"),s._v(" "),e("h2",{attrs:{id:"おさらい"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#おさらい"}},[s._v("#")]),s._v(" おさらい")]),s._v(" "),e("p",[s._v("前回ではコンテナの起動に作成済みのイメージを使ってコンテナを起動していました。\n今回は作成済みのコンテナイメージを使ってコンテナを起動するのではなく、コンテナイメージの作成から行ってみましょう。")]),s._v(" "),e("h3",{attrs:{id:"演習2-dockerコンテナイメージを作成する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#演習2-dockerコンテナイメージを作成する"}},[s._v("#")]),s._v(" 演習2 Dockerコンテナイメージを作成する")]),s._v(" "),e("p",[s._v("Dockerコンテナイメージの作成には予め作成済みである"),e("code",[s._v("DockerFile")]),s._v("を使用します")]),s._v(" "),e("ul",[e("li",[s._v("DockerFileの取得"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/docker/getting-started.git\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("イメージのビルド"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" getting-started\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" build -t iijbootcamp_docker01 "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[s._v("コンテナの起動"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --rm -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 --name iijbootcamp_docker01-tutorial iijbootcamp_docker01\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("details",[e("summary",[s._v("実行中のログ")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh\n10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf\n10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh\n/docker-entrypoint.sh: Configuration complete; ready for start up\n2022/06/17 04:10:18 [notice] 1#1: using the "epoll" event method\n2022/06/17 04:10:18 [notice] 1#1: nginx/1.21.6\n2022/06/17 04:10:18 [notice] 1#1: built by gcc 10.3.1 20211027 (Alpine 10.3.1_git20211027)\n2022/06/17 04:10:18 [notice] 1#1: OS: Linux 4.18.0-348.2.1.el8_5.x86_64\n2022/06/17 04:10:18 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576\n2022/06/17 04:10:18 [notice] 1#1: start worker processes\n2022/06/17 04:10:18 [notice] 1#1: start worker process 32\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])]),s._v(" "),e("ul",[e("li",[s._v("ここまでできたらDockerコンテナによる仮想環境プラットフォームの構築は完了です。\n"),e("ul",[e("li",[s._v("とりあえずここでは "),e("strong",[s._v("Ctrl+C")]),s._v(" で停止してください。")])])])]),s._v(" "),e("h3",{attrs:{id:"発展課題2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#発展課題2"}},[s._v("#")]),s._v(" 発展課題2")]),s._v(" "),e("p",[s._v("前回同様、演習. 2の通り実施するとターミナルが占有されていまいます。\n従って、今回もバックグラウンドで起動し、ターミナルが占有されないように実行してみましょう")]),s._v(" "),e("ul",[e("li",[s._v("コンテナのデーモン起動"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --rm -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 -d --name iijbootcamp_docker01-tutorial iijbootcamp_docker01\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("コンテナの起動確認"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("CONTAINER ID   IMAGE                    COMMAND                   CREATED         STATUS         PORTS                               NAMES\n38ebcf110f45   docker/getting-started   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" seconds ago   Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" seconds   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp, :::80-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp   fervent_shaw\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("ここで"),e("strong",[s._v("NAMES")]),s._v("に表示されている値を記憶、若しくは記録しておいてください")])])]),s._v(" "),e("li",[s._v("起動の確認\n"),e("ul",[e("li",[s._v("ブラウザを開き、以下のURLを入力します"),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("http://localhost:80\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("以下のような画面が表示されれば成功です\n"),e("img",{attrs:{src:t(237),alt:"getting-started"}})])])]),s._v(" "),e("li",[s._v("コンテナの終了\n"),e("ul",[e("li",[e("strong",[s._v("docker stop")]),s._v("コマンドを用いてdockerコンテナを停止します")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker stop <NAME>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("コンテナが停止したことの確認\n"),e("ul",[e("li",[s._v("ブラウザにて "),e("strong",[e("a",{attrs:{href:"http://localhost",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost"),e("OutboundLink")],1)]),s._v("にアクセスし、アクセスできないことを確認する")]),s._v(" "),e("li",[e("strong",[s._v("docker ps")]),s._v("コマンドを用いて、何も表示されないことを確認する"),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])])])]),s._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),e("h3",{attrs:{id:"docker-イメージのビルド"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-イメージのビルド"}},[s._v("#")]),s._v(" Docker イメージのビルド")]),s._v(" "),e("p",[s._v("Dockerコンテナを使って仮想環境プラットフォームを作成するためには、Dockerイメージが必要となります。")]),s._v(" "),e("p",[s._v("通常であれば、"),e("code",[s._v("Dockerfile")]),s._v("を使用して自分のアプリケーションのDockerイメージを作成します。\n"),e("code",[s._v("Dockerfile")]),s._v("は、アプリケーションの依存関係や設定、実行コマンドなどを指定するためのテキストファイルです。\n"),e("code",[s._v("DockerFile")]),s._v("が作成できたらDockerイメージをビルドして作成します。その際に使うコマンドは"),e("code",[s._v("docker build")]),s._v("になります。")]),s._v(" "),e("p",[s._v("通常であればテキストエディタを開いて"),e("code",[s._v("DockerFile")]),s._v("を作成しますが、完全にゼロの状態から"),e("code",[s._v("DockerFile")]),s._v("を作成するのは難しい為、先ずはチュートリアル用に公開されている物を使用すると良いでしょう")]),s._v(" "),e("credit-footer")],1)}),[],!1,null,null,null);e.default=a.exports}}]);