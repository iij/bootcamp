(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{490:function(s,t,a){"use strict";a.r(t);var e=a(10),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"リレーショナルdbを触ってみる"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#リレーショナルdbを触ってみる"}},[s._v("#")]),s._v(" リレーショナルDBを触ってみる")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"事前準備"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事前準備"}},[s._v("#")]),s._v(" <事前準備>")]),s._v(" "),t("ul",[t("li",[s._v("Dockerがインストールされていること")]),s._v(" "),t("li",[s._v("PowerShellが利用できる状態であること")]),s._v(" "),t("li",[s._v("インターネットに接続できていること")])]),s._v(" "),t("h1",{attrs:{id:"postgresqlについて"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgresqlについて"}},[s._v("#")]),s._v(" PostgreSQLについて")]),s._v(" "),t("h3",{attrs:{id:"呼び方"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#呼び方"}},[s._v("#")]),s._v(" 呼び方")]),s._v(" "),t("p",[s._v("「ポストグレス キューエル」らしいのですが、この呼び方している人は少ないように感じます。"),t("br"),s._v("\nよく聞くのは「ポスグレ」、「ポストグレス」です。")]),s._v(" "),t("h3",{attrs:{id:"日本postgresqlユーザ会"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日本postgresqlユーザ会"}},[s._v("#")]),s._v(" 日本PostgreSQLユーザ会")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.postgresql.jp/",target:"_blank",rel:"noopener noreferrer"}},[s._v("日本PostgreSQLユーザ会"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("日本国内でPostgreSQLデータベースを使用するユーザーのコミュニティおよび組織です。")]),s._v(" "),t("li",[s._v("このユーザ会は、PostgreSQLに関心を持つ人々が情報共有や交流を行い、技術的な知識を向上させることを目的としています。")])]),s._v(" "),t("h3",{attrs:{id:"バージョン体系-超抜粋"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#バージョン体系-超抜粋"}},[s._v("#")]),s._v(" バージョン体系（超抜粋）")]),s._v(" "),t("p",[s._v("※8.0よりも前のバージョン（6.0や7.0）については省略します。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"right"}},[s._v("メジャーバージョン")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("リリース日")]),s._v(" "),t("th",{staticStyle:{"text-align":"right"}},[s._v("最新マイナー版")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("最新版リリース日")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("サポート期限")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("8.0")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2005/11/8")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("8.0.26")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2010/10/4")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2010/10/1")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("8.1.x～8.4.x")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("省略")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("省略")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("省略")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("省略")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("9.0")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2010/9/20")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("9.0.23")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2015/10/8")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2010/10/8")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("9.1.x～9.6.x")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("省略")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("省略")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("省略")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("省略")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("10")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2017/10/5")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("10.22")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2022/8/11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2022/11/10")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2018/10/18")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("11.20")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2023/5/11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2023/11/9")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("12")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2019/10/3")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("12.15")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2023/5/11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2024/11/14")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("13")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2020/9/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("13.11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2023/5/11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2025/11/13")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("14")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2021/9/30")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("14.8")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2023/5/11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2026/11/12")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"right"}},[s._v("15")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2022/10/13")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("15.3")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("2023/5/11")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("-")])])])]),s._v(" "),t("p",[s._v("※バージョン体系がPostgreSQL10より変更されました。")]),s._v(" "),t("p",[s._v("Postgresql 10以前　⇒　  "),t("span",{staticStyle:{"font-size":"200%",color:"red"}},[t("strong",[s._v("9.0")])]),s._v("  ."),t("span",{staticStyle:{"font-size":"200%",color:"blue"}},[s._v("23")]),t("br"),s._v(" "),t("span",{staticStyle:{"font-size":"100%",color:"red"}},[s._v("9.0の部分がメジャーバージョン")]),s._v("で"),t("span",{staticStyle:{"font-size":"100%",color:"blue"}},[s._v("23がマイナーバージョン")]),s._v("となります。"),t("br"),s._v(" "),t("br"),s._v("\n　　　Postgresql 10以降　⇒　  "),t("span",{staticStyle:{"font-size":"200%",color:"red"}},[t("strong",[s._v("10")])]),s._v(" ."),t("span",{staticStyle:{"font-size":"200%",color:"blue"}},[s._v("22")]),t("br"),s._v(" "),t("span",{staticStyle:{"font-size":"100%",color:"red"}},[s._v("10の部分がメジャーバージョン")]),s._v("で"),t("span",{staticStyle:{"font-size":"100%",color:"blue"}},[s._v("22がマイナーバージョン")]),s._v("  となります。")]),s._v(" "),t("h3",{attrs:{id:"ライセンス"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ライセンス"}},[s._v("#")]),s._v(" ライセンス")]),s._v(" "),t("p",[s._v("PostgreSQLは、"),t("span",{staticStyle:{"font-size":"100%",color:"red"}},[s._v("オープンソースのリレーショナルデータベース")]),s._v("管理システムです。"),t("br"),s._v("\nそのライセンスは、PostgreSQL Global Development Group（PGDG）によって開発されたもので以下の2つのライセンスオプションが提供されています。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("PostgreSQLライセンス（PostgreSQL License\nこれは、PostgreSQLプロジェクトが採用している独自のライセンスです。\nこのライセンスは、商用利用や非商用利用、修正や再配布を含むあらゆる使用形態に対して、\n自由かつ"),t("span",{staticStyle:{"font-size":"100%",color:"red"}},[s._v("無償で利用することを許可しています。")]),s._v("また、ソースコードの利用や変更、派生物の作成、\nバイナリ形式での再配布なども可能です。そのため、PostgreSQLを自由に使用し、変更や拡張を行い、\nプロジェクトや製品に組み込むことができます。")])]),s._v(" "),t("li",[t("p",[s._v("MIT（マサチューセッツ工科大学）ライセンス\nPostgreSQLプロジェクトは、PostgreSQLライセンスに加えて、一部のコンポーネントについてはMITライセンスも採用しています。\nMITライセンスは、商用利用や非商用利用、修正や再配布を含むあらゆる使用形態に対して、"),t("span",{staticStyle:{"font-size":"100%",color:"red"}},[s._v("自由かつ無償で利用することを許可")]),s._v("しています。\nただし、著作権表示および本許諾表示をソフトウェアのすべての複製または重要な部分に記載しなければならず、作者または著作権者は、ソフトウェアに関してなんら責任を負わない。")])])]),s._v(" "),t("h1",{attrs:{id:"ハンズオン研修-【データベースに触れてみよう】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ハンズオン研修-【データベースに触れてみよう】"}},[s._v("#")]),s._v(" ハンズオン研修  【データベースに触れてみよう】")]),s._v(" "),t("h2",{attrs:{id:"_0-postgresql環境準備"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0-postgresql環境準備"}},[s._v("#")]),s._v(" 0. PostgreSQL環境準備")]),s._v(" "),t("p",[s._v("本演習にて入力するコマンドはおおきく分けて以下の３つにわかれているため、入力する場所には注意する必要があります。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("１．Linux環境        【 $ 表示のプロンプト】"),t("br"),s._v("\n　→　  ★0-1、★0-2 、★0-3　での入力先となります。")])]),s._v(" "),t("li",[t("p",[s._v("２．コンテナ環境     【 root@xxx から始まるプロンプト】"),t("br"),s._v("\n　→　  ★0-4　★1-1、及び★A-1、★A-2、★B-1先頭行、★B-2　での入力先となります。")])]),s._v(" "),t("li",[t("p",[s._v("３．PostgreSQL環境   【 postgres=# から始まるプロンプト】"),t("br"),s._v("\n　→　  ★1-2～演習問題まで及び★B-1drop文　の入力先となります。")])])]),s._v(" "),t("p",[s._v("※出力イメージと異なるような結果が表示された際には入力場所をご確認ください。")]),s._v(" "),t("h3",{attrs:{id:"★0-1-postgresql環境のダウンロード"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★0-1-postgresql環境のダウンロード"}},[s._v("#")]),s._v(" ★0-1 PostgreSQL環境のダウンロード")]),s._v(" "),t("p",[s._v("以下のコマンドを入力し、PostgreSQL環境をダウンロードします。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker pull postgres\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◎出力イメージ\n"),t("img",{attrs:{src:"images/docker01.jpg",alt:""}})]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"★0-2-コンテナ起動"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★0-2-コンテナ起動"}},[s._v("#")]),s._v(" ★0-2 コンテナ起動")]),s._v(" "),t("p",[s._v("以下のコマンドを入力し、コンテナ（PostgreSQLも起動します）環境を起動させます。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker run --name some-postgres -e POSTGRES_PASSWORD=postgres -d postgres\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◎出力イメージ"),t("br"),s._v(" "),t("img",{attrs:{src:"images/docker02.jpg",alt:""}}),t("br"),s._v("\n※正常に起動すると上記のような64文字の文字列（値は各自で異なります）が表示されます。")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"★0-3-コンテナ接続"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★0-3-コンテナ接続"}},[s._v("#")]),s._v(" ★0-3 コンテナ接続")]),s._v(" "),t("p",[s._v("以下のコマンドを入力し、コンテナに接続します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker exec -it some-postgres /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◎出力イメージ"),t("br"),s._v(" "),t("img",{attrs:{src:"images/docker03.jpg",alt:""}}),t("br"),s._v("\n　※接続に成功すると上記のような最後に「＃」が付いた状態で表示されます。"),t("br"),s._v("\n　※「root@」以降の文字列は各自で異なります。")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"★0-4-ロケールの確認"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★0-4-ロケールの確認"}},[s._v("#")]),s._v(" ★0-4 ロケールの確認")]),s._v(" "),t("p",[s._v("本講義で使用する言語「en_US.utf8」が表示されることを確認します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("locale -a\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◎出力イメージ"),t("br"),s._v(" "),t("img",{attrs:{src:"images/docker04.jpg",alt:""}})]),s._v(" "),t("br"),s._v(" "),t("hr"),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_1-データベースへ接続してみよう"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-データベースへ接続してみよう"}},[s._v("#")]),s._v(" 1. データベースへ接続してみよう")]),s._v(" "),t("h3",{attrs:{id:"★1-1-db接続"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★1-1-db接続"}},[s._v("#")]),s._v(" ★1-1 DB接続")]),s._v(" "),t("p",[s._v("PostgreSQLデータベースに接続し、SQLを発行するためには「psql」というツールを利用します。"),t("br"),s._v("\n　OSユーザ「postgres」にスイッチ後、データベースに接続してみます。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("su - postgres\npsql -h localhost -p 5432 -d postgres -U postgres\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("◎出力イメージ"),t("br"),s._v(" "),t("img",{attrs:{src:"images/docker05.jpg",alt:""}}),t("br"),s._v("\n※プロンプトが「postgres=#」に変更されることを確認します。")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"★1-2-データベース確認"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★1-2-データベース確認"}},[s._v("#")]),s._v(" ★1-2 データベース確認")]),s._v(" "),t("p",[s._v("以下コマンド（エンマーク 英小文字のエル プラス）を実行します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\\l+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◎出力イメージ"),t("br"),s._v(" "),t("img",{attrs:{src:"images/docker06.jpg",alt:""}})]),s._v(" "),t("p",[s._v("現時点ではデータベースが３つ表示されています。"),t("br"),s._v("\n　イメージ図としては以下（グレーの四角がデータベース）です。"),t("br"),s._v(" "),t("img",{attrs:{src:"images/DB00.jpg",alt:""}})]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_2-ユーザ-ロール-を作成してみよう"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ユーザ-ロール-を作成してみよう"}},[s._v("#")]),s._v(" 2. ユーザ（ロール）を作成してみよう")]),s._v(" "),t("h3",{attrs:{id:"★2-1-ユーザ作成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★2-1-ユーザ作成"}},[s._v("#")]),s._v(" ★2-1 ユーザ作成")]),s._v(" "),t("p",[s._v("デフォルトで作成されているユーザ「postgres」以外に以下の３ユーザを作成します。")]),s._v(" "),t("ul",[t("li",[s._v("ユーザ「user01」を作成します")]),s._v(" "),t("li",[s._v("ユーザ「user02」を作成します")]),s._v(" "),t("li",[s._v("スーパーユーザ「suser01」を作成します")])]),s._v(" "),t("p",[s._v("作成後は以下のようなイメージ（緑色の丸枠がユーザ）となります。")]),s._v(" "),t("p",[t("img",{attrs:{src:"images/DB01.jpg",alt:""}})]),s._v(" "),t("p",[s._v("「user01」の作成")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("create role user01 with login password 'user01'; \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("「user02」の作成")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" create user user02 with password 'user02';\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("「suser01」の作成")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" create role suser01 with superuser login password 'suser01';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("※全て「CREATE ROLE」と表示されることを確認します。"),t("br"),s._v("\n※作成後、スーパーユーザ（suser01）でログインしなおしましょう。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" \\connect - suser01 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("※PostgreSQLにおいて「ユーザ」と「ロール」は厳密には異なるため、上記のように2種類のコマンドが存在しますが、"),t("br"),s._v("\n　今回は「ユーザ」と「ロール」は同じものであると考えましょう。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_3-データベースを作成してみよう"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-データベースを作成してみよう"}},[s._v("#")]),s._v(" 3. データベースを作成してみよう")]),s._v(" "),t("p",[s._v("「create database」文を利用しデータベースを作成します。"),t("br"),s._v("\n　ここでは、データベース名を「db_world」と指定し、template0を使用してデータベースを作成しています。"),t("br"),s._v("\n　※「public」スキーマも同時に作成されます。 (スキーマは後述しますが、「public」スキーマは全ユーザが自由に使えるスキーマです)")]),s._v(" "),t("p",[t("img",{attrs:{src:"images/DB02.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"★3-1-データベースの作成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★3-1-データベースの作成"}},[s._v("#")]),s._v(" ★3-1 データベースの作成")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("create database db_world owner = suser01 template = template0 encoding = 'UTF8' lc_collate = 'en_US.utf8' lc_ctype = 'en_US.utf8';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("※「CREATE DATABASE」と表示されることを確認します。")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"★3-2-データベースへの接続"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★3-2-データベースへの接続"}},[s._v("#")]),s._v(" ★3-2 データベースへの接続")]),s._v(" "),t("p",[s._v("次STEPの準備として、作成したデータベース（db_world）にスーパーユーザ（suser01）で接続します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\\connect db_world suser01  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h2",{attrs:{id:"_4-スキーマを作成し権限を付与してみよう"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-スキーマを作成し権限を付与してみよう"}},[s._v("#")]),s._v(" 4. スキーマを作成し権限を付与してみよう")]),s._v(" "),t("p",[s._v("データベース内にスキーマ（青色の四角枠）を作成し、ユーザに利用権限（オレンジの矢印）を付与します。"),t("br"),s._v("\n　スキーマとは、テーブルやインデックスといったオブジェクトを配置する領域です。"),t("br"),s._v("\n　※「public」スキーマはDB作成時に作られており、テーブル等の作成時にスキーマ名を省略するとこの領域に配置されます。")]),s._v(" "),t("p",[t("img",{attrs:{src:"images/DB03.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"★4-1-スキーマの作成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★4-1-スキーマの作成"}},[s._v("#")]),s._v(" ★4-1 スキーマの作成")]),s._v(" "),t("p",[s._v("以下の2つのスキーマを作成してみましょう。\n　以下の例では２つのスキーマの所有者に「suser01」を指定しています。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("create schema sch_jpn authorization suser01;\t\ncreate schema sch_usa authorization suser01;\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("※「CREATE SCHEMA」と表示されることを確認してください。")]),s._v(" "),t("h3",{attrs:{id:"★4-2-権限付与"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★4-2-権限付与"}},[s._v("#")]),s._v(" ★4-2 権限付与")]),s._v(" "),t("p",[s._v("所有者以外がスキーマにオブジェクトを配置するためには権限が必要です。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("grant all privileges on database db_world to user01;\t\ngrant all privileges on schema sch_jpn to user01;\t\ngrant all privileges on schema sch_jpn to user02;\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("※「GRANT」と表示されることを確認してください。"),t("br"),s._v("\n　　この権限の追加により")]),s._v(" "),t("ul",[t("li",[s._v("「user01」は「db_world」データベース、「sch_jpn」スキーマ内への全権限を有します。")]),s._v(" "),t("li",[s._v("「user02」は「sch_jpn」スキーマ内への全権限を有します。")])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_5-テーブルを作成してみよう"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-テーブルを作成してみよう"}},[s._v("#")]),s._v(" 5. テーブルを作成してみよう")]),s._v(" "),t("p",[s._v("上記にて作成した「sch_jpn」スキーマ内にテーブル（オレンジ色の四角枠）を作成します。"),t("br"),s._v(" "),t("img",{attrs:{src:"images/DB04.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"★5-1-テーブル作成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★5-1-テーブル作成"}},[s._v("#")]),s._v(" ★5-1 テーブル作成")]),s._v(" "),t("p",[s._v("「user01」で接続し、テーブルを作成します。"),t("br"),s._v("\n　以下ではテーブル作成時に主キー（PRIMARY KEY）を作成しています。"),t("br"),s._v("\n　主キーを作成した列には同じ値とnullを挿入できなくなります。"),t("br"),s._v("\n　※スキーマ（sch_jpn）は必ず指定してください。省略してしまうと「public」スキーマに作成されます。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\\connect db_world user01\ncreate table sch_jpn.tbl_region(id_reg serial,reg_name varchar(40), PRIMARY KEY (id_reg));\ncreate table sch_jpn.tbl_pref(id_pref serial,pref_name varchar(40),id_reg int, PRIMARY KEY (id_pref));\ncreate table sch_jpn.tbl_food(id_fd serial,fd_name varchar(40),price int, PRIMARY KEY (id_fd));\ncreate table sch_jpn.tbl_proper(id_user serial,username varchar(40),id_pref int,id_fd int, PRIMARY KEY (id_user));\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("※「CREATE TABLE」と表示されることを確認してください。")]),s._v(" "),t("p",[s._v("※テーブルを削除するコマンドは「drop table <テーブル名>」となります。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_6-テーブルにデータを登録してみよう-insert-into-values"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-テーブルにデータを登録してみよう-insert-into-values"}},[s._v("#")]),s._v(" 6. テーブルにデータを登録してみよう（insert into ～ values～）")]),s._v(" "),t("h3",{attrs:{id:"★6-1-データの登録"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★6-1-データの登録"}},[s._v("#")]),s._v(" ★6-1 データの登録")]),s._v(" "),t("p",[s._v("上記で作成したテーブルにデータを登録します。"),t("br"),s._v("\n　データを追加するコマンドはinsert文となります。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("insert into sch_jpn.tbl_region(reg_name)  values ('hokkaido');\ninsert into sch_jpn.tbl_region(reg_name)  values ('tohoku');\ninsert into sch_jpn.tbl_region(reg_name)  values ('kanto');\ninsert into sch_jpn.tbl_region(reg_name)  values ('chubu');\ninsert into sch_jpn.tbl_region(reg_name)  values ('kinki');\ninsert into sch_jpn.tbl_region(reg_name)  values ('shikoku');\ninsert into sch_jpn.tbl_region(reg_name)  values ('kyushu');\n\ninsert into sch_jpn.tbl_pref(pref_name,id_reg)  values ('hokkaido',1);\ninsert into sch_jpn.tbl_pref(pref_name,id_reg)  values ('yamanashi',4);\ninsert into sch_jpn.tbl_pref(pref_name,id_reg)  values ('osaka',5);\ninsert into sch_jpn.tbl_pref(pref_name,id_reg)  values ('nagasaki',7);\ninsert into sch_jpn.tbl_pref(pref_name,id_reg)  values ('tokyo',3);\ninsert into sch_jpn.tbl_pref(pref_name,id_reg)  values ('chiba',3);\n\ninsert into sch_jpn.tbl_food(fd_name,price)  values ('hamburger',500);\ninsert into sch_jpn.tbl_food(fd_name,price)  values ('ramen',1500);\ninsert into sch_jpn.tbl_food(fd_name,price)  values ('takoyaki',800);\ninsert into sch_jpn.tbl_food(fd_name,price)  values ('gyoza',350);\n\ninsert into sch_jpn.tbl_proper(username,id_pref,id_fd)  values ('suzuki',1,1);\ninsert into sch_jpn.tbl_proper(username,id_pref,id_fd)  values ('satou',2,4);\ninsert into sch_jpn.tbl_proper(username,id_pref,id_fd)  values ('tanaka',3,2);\ninsert into sch_jpn.tbl_proper(username,id_pref,id_fd)  values ('ito',4,3);\ninsert into sch_jpn.tbl_proper(username,id_pref,id_fd)  values ('watanabe',5,4);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("p",[s._v("※全て「INSERT 0 1」と表示されることを確認してください。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_7-データを参照してみよう-select-from"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-データを参照してみよう-select-from"}},[s._v("#")]),s._v(" 7. データを参照してみよう（select ～ from ～）")]),s._v(" "),t("h3",{attrs:{id:"★7-1-データの参照"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★7-1-データの参照"}},[s._v("#")]),s._v(" ★7-1 データの参照")]),s._v(" "),t("p",[s._v("テーブルに登録されているデータを参照します。データはSELECT文にて参照します。"),t("br"),s._v("\n　※「＊」を指定するとテーブルのカラム（列）全てを指定したことと同義になります。")]),s._v(" "),t("p",[s._v("〇7-1-1. 入力コマンド")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select * from sch_jpn.tbl_region;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("●7-1-1. 出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" id_reg | reg_name\n--------+----------\n      1 | hokkaido\n      2 | tohoku\n      3 | kanto\n      4 | chubu\n      5 | kinki\n      6 | shikoku\n      7 | kyushu\n(7 rows)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("br"),s._v(" "),t("p",[s._v("〇7-1-2. 入力コマンド")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select * from sch_jpn.tbl_pref;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("●7-1-2. 出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" id_pref | pref_name | id_reg\n---------+-----------+--------\n       1 | hokkaido  |      1\n       2 | yamanashi |      4\n       3 | osaka     |      5\n       4 | nagasaki  |      7\n       5 | tokyo     |      3\n       6 | chiba     |      3\n(6 rows)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("br"),s._v(" "),t("p",[s._v("〇7-1-3. 入力コマンド")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select * from sch_jpn.tbl_food;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("●7-1-3. 出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" id_fd |  fd_name  | price\n-------+-----------+-------\n     1 | hamburger |   500\n     2 | ramen     |  1500\n     3 | takoyaki  |   800\n     4 | gyoza     |   350\n(4 rows)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("br"),s._v(" "),t("p",[s._v("〇7-1-4. 入力コマンド")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select * from sch_jpn.tbl_proper;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("●7-1-4. 出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" id_user | username | id_pref | id_fd\n---------+----------+---------+-------\n       1 | suzuki   |       1 |     1\n       2 | satou    |       2 |     4\n       3 | tanaka   |       3 |     2\n       4 | ito      |       4 |     3\n       5 | watanabe |       5 |     4\n(5 rows)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"★7-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★7-2"}},[s._v("#")]),s._v(" ★7-2")]),s._v(" "),t("p",[s._v("テーブルから条件を指定 (where句)してデータを抽出します。")]),s._v(" "),t("p",[s._v("〇7-2-1. 入力コマンド")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select * from sch_jpn.tbl_pref where id_reg=3;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("●7-2-1. 出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" id_pref | pref_name | id_reg\n---------+-----------+--------\n       5 | tokyo     |      3\n       6 | chiba     |      3\n(2 rows)\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"★7-3-複数のテーブルからのデータ参照"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★7-3-複数のテーブルからのデータ参照"}},[s._v("#")]),s._v(" ★7-3 複数のテーブルからのデータ参照")]),s._v(" "),t("p",[s._v("複数のテーブルを結合しデータを抽出します。")]),s._v(" "),t("p",[s._v("〇7-3-1. 入力コマンド")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select\n pp.username,\n pr.pref_name,\n rg.reg_name,\n fd.fd_name\nfrom\n sch_jpn.tbl_region rg,\n sch_jpn.tbl_pref  pr,\n sch_jpn.tbl_food  fd,\n sch_jpn.tbl_proper pp\nwhere\n pp.id_pref=pr.id_pref and\n pp.id_fd=fd.id_fd and\n pr.id_reg=rg.id_reg\nORDER BY\npp.username\n;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("●7-3-1. 出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" username | pref_name | reg_name |  fd_name\n----------+-----------+----------+-----------\n ito      | nagasaki  | kyushu   | takoyaki\n satou    | yamanashi | chubu    | gyoza\n suzuki   | hokkaido  | hokkaido | hamburger\n tanaka   | osaka     | kinki    | ramen\n watanabe | tokyo     | kanto    | gyoza\n(5 rows)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"_8-データを更新してみよう-update-set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-データを更新してみよう-update-set"}},[s._v("#")]),s._v(" 8. データを更新してみよう（update ～ set ～）")]),s._v(" "),t("h3",{attrs:{id:"★8-1-データの更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★8-1-データの更新"}},[s._v("#")]),s._v(" ★8-1 データの更新")]),s._v(" "),t("p",[s._v("データを変更するには「update」文を使用します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("update  sch_jpn.tbl_pref set id_reg=4  where id_pref=2;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◆変更されているか確認してみよう。"),t("br"),s._v("\n　　⇒　上記で使用したSELECT文を使い「tbl_pref」を参照してください。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_9-データを削除してみよう-delete-from"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-データを削除してみよう-delete-from"}},[s._v("#")]),s._v(" 9. データを削除してみよう（delete from ～）")]),s._v(" "),t("h3",{attrs:{id:"★9-1-データの削除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★9-1-データの削除"}},[s._v("#")]),s._v(" ★9-1 データの削除")]),s._v(" "),t("p",[s._v("データを削除するには「delete」文を使用します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("delete from sch_jpn.tbl_food  where fd_name='ramen';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("◆削除されているか確認してみよう。"),t("br"),s._v("\n　　⇒　上記で使用したSELECT文を使い「tbl_food」 を参照してください。")]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("hr"),s._v(" "),t("h1",{attrs:{id:"演習問題"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#演習問題"}},[s._v("#")]),s._v(" 演習問題")]),s._v(" "),t("h3",{attrs:{id:"問1-自分の好きな食べ物を「tbl-food」テーブルに登録し、そのデータを使って自分の情報をプロパー「tbl-proper」テーブルに登録してください"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#問1-自分の好きな食べ物を「tbl-food」テーブルに登録し、そのデータを使って自分の情報をプロパー「tbl-proper」テーブルに登録してください"}},[s._v("#")]),s._v(" 問１）自分の好きな食べ物を「tbl_food」テーブルに登録し、そのデータを使って自分の情報をプロパー「tbl_proper」テーブルに登録してください")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("hint: insert into ～ values ～  \n")])])]),t("br"),s._v(" "),t("h3",{attrs:{id:"問2-問1で追加したデータを参照してください-2テーブルを確認してください"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#問2-問1で追加したデータを参照してください-2テーブルを確認してください"}},[s._v("#")]),s._v(" 問２）問１で追加したデータを参照してください（２テーブルを確認してください）")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("hint: select ～ from ～ where ～\n")])])]),t("br"),s._v(" "),t("h3",{attrs:{id:"問3-「tbl-proper」の中に存在している「tanaka」さんを「ikeda」さんに変更し、確認してください"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#問3-「tbl-proper」の中に存在している「tanaka」さんを「ikeda」さんに変更し、確認してください"}},[s._v("#")]),s._v(" 問３）「tbl_proper」の中に存在している「tanaka」さんを「ikeda」さんに変更し、確認してください")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("hint: update ～ set ～\n")])])]),t("br"),s._v(" "),t("h3",{attrs:{id:"問4-「tbl-food」から「takoyaki」のみを削除し、確認してください"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#問4-「tbl-food」から「takoyaki」のみを削除し、確認してください"}},[s._v("#")]),s._v(" 問４）「tbl_food」から「takoyaki」のみを削除し、確認してください")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("hint: delete from ～ where ～\n")])])]),t("br"),s._v(" "),t("p",[s._v("▼▼▼▼▼▼▼▼▼▼▼▼▼以降、時間がある人向け▼▼▼▼▼▼▼▼▼▼▼▼▼")]),s._v(" "),t("h2",{attrs:{id:"a-バックアップ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-バックアップ"}},[s._v("#")]),s._v(" A．バックアップ")]),s._v(" "),t("h3",{attrs:{id:"★a-1-データベース-バックアップ準備"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★a-1-データベース-バックアップ準備"}},[s._v("#")]),s._v(" ★A-1. データベース バックアップ準備")]),s._v(" "),t("p",[s._v("バックアップデータの保管先へ移動します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("su - postgres\t\ncd /tmp\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"★a-2-データベースのバックアップ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★a-2-データベースのバックアップ"}},[s._v("#")]),s._v(" ★A-2. データベースのバックアップ")]),s._v(" "),t("p",[s._v("ここでは、２通りのバックアップを試してみます。")]),s._v(" "),t("h4",{attrs:{id:"★a-2-1-plain形式での出力-人間が見て分かるような結果が出力されます"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★a-2-1-plain形式での出力-人間が見て分かるような結果が出力されます"}},[s._v("#")]),s._v(" ★A-2-1 plain形式での出力\t（人間が見て分かるような結果が出力されます）")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pg_dump -U suser01 -d db_world --format=p --create --file db_world_db.sql\n\ncat db_world_db.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"★a-2-2-バイナリ形式での出力"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★a-2-2-バイナリ形式での出力"}},[s._v("#")]),s._v(" ★A-2-2 バイナリ形式での出力")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pg_dump -U suser01 -d db_world --format=c --create --file db_world_db.custom\n\nls -l\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("◎出力結果")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("total 20\n-rw-r--r-- 1 postgres postgres 9710 Jul 10 12:00 db_world_db.custom\n-rw-r--r-- 1 postgres postgres 7561 Jul 10 11:59 db_world_db.sql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("br"),s._v(" "),t("h2",{attrs:{id:"b-リストア"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-リストア"}},[s._v("#")]),s._v(" B．リストア")]),s._v(" "),t("h3",{attrs:{id:"★b-1-データベース削除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★b-1-データベース削除"}},[s._v("#")]),s._v(" ★B-1. データベース削除")]),s._v(" "),t("p",[s._v("データベースが破損したという仮定で、データベースを削除します。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("psql -h localhost -p 5432 -d postgres -U postgres\n\n\\l\ndrop database db_world;\n\\l\n\n\\q\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"★b-2-データベースをリストア"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#★b-2-データベースをリストア"}},[s._v("#")]),s._v(" ★B-2. データベースをリストア")]),s._v(" "),t("p",[s._v("データベースが削除されているため、「db_world」データベースを作成し、"),t("br"),s._v("\n　「db_world_db.custom」を使ってリストアします。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("createdb --template=template0 --encoding='UTF8' --lc-collate='en_US.utf8' --lc-ctype='en_US.utf8' db_world\n\npg_restore -v -c -d db_world /tmp/db_world_db.custom\n\npsql -h localhost -p 5432 -d postgres -U postgres\n\\l\n\\q\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("この操作にてバックアップ取得時の状態へ復旧します。")]),s._v(" "),t("p",[s._v("※この他にもバックアップ取得時点ではなく、障害発生直前にまでリカバリできる"),t("br"),s._v("\n　　バックアップコマンド（pg_basebackup）も存在しますがここでは割愛します。")]),s._v(" "),t("br"),s._v(" "),t("hr"),s._v(" "),t("h1",{attrs:{id:"postgresql環境の停止について"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgresql環境の停止について"}},[s._v("#")]),s._v(" PostgreSQL環境の停止について")]),s._v(" "),t("p",[s._v("Docker runコマンド実行の際に -d optionをつけている(back ground実行)ため、"),t("br"),s._v("\n★0-3 コンテナ接続"),t("br"),s._v("\nで 開いていた bash で exit してもPostgreSQL（コンテナ）環境は終了しません。")]),s._v(" "),t("p",[s._v("演習が終わりましたらstopコマンドにて停止させてください。"),t("br"),s._v("\npsコマンドにてstatus列 が　Exited　になっていれば停止となります。"),t("br"),s._v("\n※再度利用する際には docker start some-postgres にて起動可能させます。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker stop some-postgres\n\ndocker ps -a\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("以上")])])}),[],!1,null,null,null);t.default=r.exports}}]);