(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{465:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"github-actions-でciテスト・デプロイを回す"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-でciテスト・デプロイを回す"}},[t._v("#")]),t._v(" GitHub Actions でCIテスト・デプロイを回す")]),t._v(" "),s("h2",{attrs:{id:"_0-この講義について"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-この講義について"}},[t._v("#")]),t._v(" 0. この講義について")]),t._v(" "),s("h3",{attrs:{id:"_0-1-この講義の目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-1-この講義の目的"}},[t._v("#")]),t._v(" 0.1 この講義の目的")]),t._v(" "),s("p",[t._v("GitHub Actions を利用したCI/CDを体験し、自分のプロジェクトにCI/CDを自ら導入できるようにする。")]),t._v(" "),s("h3",{attrs:{id:"_0-2-ハンズオンの対象者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-2-ハンズオンの対象者"}},[t._v("#")]),t._v(" 0.2 ハンズオンの対象者")]),t._v(" "),s("p",[t._v("この講義は drone/GitHub ActionsでCIテスト・デプロイを回す の 一部分です。"),s("br"),t._v("\ndrone の説明を聞いてあること。drone のハンズオンを実施してあることが前提になっています。")]),t._v(" "),s("h3",{attrs:{id:"_0-3-下準備"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-3-下準備"}},[t._v("#")]),t._v(" 0.3 下準備")]),t._v(" "),s("p",[t._v("drone のハンズオン と同様です。また、 drone のハンズオン で作成したリポジトリを利用します。")]),t._v(" "),s("h3",{attrs:{id:"_0-4-この資料のお約束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-4-この資料のお約束"}},[t._v("#")]),t._v(" 0.4. この資料のお約束")]),t._v(" "),s("p",[t._v("💻 は自分で操作する箇所を示しています。")]),t._v(" "),s("p",[t._v("<ほげほげ> で囲まれている部分は自分の設定値で置き換えてください。たとえば")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone <リモートリポジトリのアドレス>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("と記載されている箇所は")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone git@github.com:iij/bootcamp.git\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("というように置き換えてください。")]),t._v(" "),s("h2",{attrs:{id:"_1-github-actions-とは"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-github-actions-とは"}},[t._v("#")]),t._v(" 1. GitHub Actions とは")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.github.com/ja/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions"),s("OutboundLink")],1),t._v(" とは GitHub が提供する CI/CD プラットフォームです。")]),t._v(" "),s("p",[t._v("複数の Action を組み合わせることで、 さまざまなワークフローを自動化できるようになっています。")]),t._v(" "),s("p",[t._v("Linux, Windows, macOS があらかじめ用意されているほか、自前で self-hosted runner と呼ばれる処理用のホストを用意することも可能です。")]),t._v(" "),s("p",[t._v("GitHub 上の Publicリポジトリ や、 self-hosted runner を利用する場合 無料で使えます。")]),t._v(" "),s("p",[t._v("Private リポジトリでは、一部制限があるので留意ください。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.github.com/ja/billing/managing-billing-for-github-actions/about-billing-for-github-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actionsの支払いについて"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_2-1-とりあえず初めてみる"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-とりあえず初めてみる"}},[t._v("#")]),t._v(" 2.1. とりあえず初めてみる")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("drone ハンズオン では以下をやってみました。")]),t._v(" "),s("ul",[s("li",[t._v("RSpec の実行")]),t._v(" "),s("li",[t._v("textlint の実行")]),t._v(" "),s("li",[t._v("rails の test")])])]),t._v(" "),s("li",[s("p",[t._v("ここでは、RSpec の実行 と textlint の実行 を GitHub Actions で設定してみます。")])])]),t._v(" "),s("h4",{attrs:{id:"_2-1-1-rspec-や-textlint-をしてみる"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-rspec-や-textlint-をしてみる"}},[t._v("#")]),t._v(" 2.1.1. RSpec や textlint をしてみる")]),t._v(" "),s("ul",[s("li",[t._v("drone の ハンズオンで作成した "),s("code",[t._v("drone-exercise-<user名>")]),t._v(" へ移動してください")]),t._v(" "),s("li",[t._v("その後、以下のようなファイルを"),s("code",[t._v(".github/workflows/ci.yml")]),t._v("に作成します。")])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CI\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rspec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ruby/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ruby@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ruby-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.6'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bundler-cache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" do test\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bundle exec rspec\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("textlint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v3\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'16'")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install textlint\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install textlint\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install textlint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("preset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ja"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("technical"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("writing\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $(npm bin)/textlint "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("format pretty"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("error "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("preset ja"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("technical"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("writing README.md\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])]),s("p",[t._v("作成後 push すると GitHub の Actions タブから実行状況を確認できます。")]),t._v(" "),s("p",[t._v("それでは "),s("code",[t._v("README.md")]),t._v(" の内容を修正したり、 "),s("code",[t._v("hello_world.rb")]),t._v(" の 内容を改変して 振る舞いを確認してみてください。")]),t._v(" "),s("p",[t._v("もちろん drone と同じく PR を作って試行錯誤しても良いです。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("チェックポイント8 🏁")]),t._v(" "),s("p",[t._v("GitHub Actions で テストが実行できましたか"),s("br"),t._v(" "),s("code",[t._v("README.md")]),t._v(" や "),s("code",[t._v("hello_world.rb")]),t._v(" を改変し テストに失敗させるなどできましたか")])]),t._v(" "),s("h2",{attrs:{id:"_3-github-actions-の-基本的な設定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-github-actions-の-基本的な設定"}},[t._v("#")]),t._v(" 3. GitHub Actions の 基本的な設定")]),t._v(" "),s("p",[t._v("drone の設定と同様 複数の step からなる Workflow を作成できるようになっています。")]),t._v(" "),s("p",[t._v("drone のように container image を指定して任意のコマンドを実行させることも可能ですが、最大の特徴は Action と呼ばれる再利用可能なコードを組み合わせることで、簡単にさまざまなことができるようになっている点です。")]),t._v(" "),s("p",[t._v("GitHub Actions にはさまざまな設定項目がありますが、前述した RSpec と textlint の実行に絞って 各項目について解説していきます。")]),t._v(" "),s("p",[t._v("他詳細は"),s("a",{attrs:{href:"https://docs.github.com/ja/actions/using-workflows/workflow-syntax-for-github-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("公式ドキュメント"),s("OutboundLink")],1),t._v(" を参照ください")]),t._v(" "),s("h3",{attrs:{id:"_3-1-name-on"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-name-on"}},[t._v("#")]),t._v(" 3.1. name, on")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CI\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("ul",[s("li",[s("p",[s("code",[t._v("name")]),t._v(" - このファイルで実現されるものについての名前です。")]),t._v(" "),s("p",[t._v("なお、"),s("code",[t._v(".drone.yml")]),t._v(" の一つしか用意できなかった "),s("a",{attrs:{href:"http://drone.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("drone.io"),s("OutboundLink")],1),t._v(" とは異なり"),s("br"),t._v(" "),s("code",[t._v(".github/workflows")]),t._v(" 以下に複数のファイルを置くことが可能です。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("on")]),t._v(" - ワークフローがいつ実行されるかの定義です。")]),t._v(" "),s("p",[t._v("特定の branch に対する操作のときだけに限定したりも可能ですが、"),s("br"),t._v("\n今回は push すべてを対象にしています。")])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-jobs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-jobs"}},[t._v("#")]),t._v(" 3.2. jobs")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rspec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ruby/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ruby@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ruby-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.6'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bundler-cache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bundle exec rspec\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("jobs は job の集合体です。job は ワークフローの実行単位で必ず一つ以上含まれます。")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("rspec")]),t._v(" というのが この job の 識別子になります。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("runs-on")]),t._v(" - どんなタイプのマシンで このジョブを実行したいかを指定します。")]),t._v(" "),s("p",[t._v("自前でランナーを用意する場合は "),s("code",[t._v("self-hosted")]),t._v(" と指定したり、"),s("br"),t._v(" "),s("a",{attrs:{href:"http://GitHub.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub.com"),s("OutboundLink")],1),t._v(" が用意するものを利用する場合は "),s("code",[t._v("ubuntu-latest")]),t._v(" などと指定します。"),s("br"),t._v("\nほかにも Windows や macOS を選択することも可能です。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("steps")]),t._v(" - job の実際の操作を記述する部分です。"),s("br"),t._v(" "),s("code",[t._v("uses")]),t._v(" や "),s("code",[t._v("run")]),t._v(" などで実際にどんな操作を行うか定義できます。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("run")]),t._v(" - コマンドを実行します。"),s("br"),t._v("\nコマンドは、デフォルトでは非ログインシェルを使用して実行されます。"),s("br"),t._v("\nyaml の "),s("code",[t._v("|")]),t._v(" を利用して複数行実行することや、"),s("br"),t._v(" "),s("code",[t._v("working-directory")]),t._v(" を指定して特定のディレクトリで実行させることも可能です。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("uses")]),t._v(" - action を実行します。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("actions/checkout@v2")]),s("br"),t._v("\nGit checkout をします。 Git repository の内容について処理する場合はこれが必要です。")]),t._v(" "),s("li",[s("code",[t._v("ruby/setup-ruby@v1")]),s("br"),t._v("\nRuby をインストールします。 このあとの "),s("code",[t._v("run")]),t._v(" では Ruby のコマンドを利用できます。")])]),t._v(" "),s("p",[t._v("また、 一部 "),s("code",[t._v("with")]),t._v(" で パラメータを与えられるものもあります。"),s("br"),t._v("\n(Ruby のバージョンを3にしてみるのもよいですね。)")]),t._v(" "),s("p",[t._v("なお、 この action の @v2 や @v1 は branch や tag などの Git 的 refs を意味します。"),s("br"),t._v("\nつまり、 GitHub 上の ある repository の内容を利用しているということです。"),s("br"),t._v("\nそのため、 repository 側の更新により、意図せず振る舞いが変わる可能性があります。")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("公式でも「リリースされたアクションバージョンのコミットSHAを使用するのが、安定性とセキュリティのうえで最も安全です。」としています。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.github.com/ja/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsuses",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.github.com/ja/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsuses"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_4-ほかにも"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ほかにも"}},[t._v("#")]),t._v(" 4. ほかにも")]),t._v(" "),s("p",[t._v("GitHub Actions の最大の特徴は action を組み合わせて workflow を実現できる点でした。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/marketplace",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/marketplace"),s("OutboundLink")],1),t._v(" では さまざまな action を探すことができます")]),t._v(" "),s("p",[t._v("さらには 自分で action を作ることも可能です。")]),t._v(" "),s("p",[t._v("いろいろ探してみてください。")]),t._v(" "),s("p",[t._v("ちなみに、この資料も GitHub Actions で作られています。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/iij/bootcamp/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/iij/bootcamp/actions"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://github.com/iij/bootcamp/tree/master/.github/workflows",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/iij/bootcamp/tree/master/.github/workflows"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_8-参考情報"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-参考情報"}},[t._v("#")]),t._v(" 8. 参考情報")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.github.com/ja/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);