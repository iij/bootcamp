(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{440:function(s,e,a){"use strict";a.r(e);var n=a(10),t=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_2-ansibleの実行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-ansibleの実行"}},[s._v("#")]),s._v(" 2. Ansibleの実行")]),s._v(" "),e("p",[s._v("Ansibleを利用する為にはいくつかのファイルを書く必要がありますが\nまずは実際にAnsibleを実行してイメージを掴んでみましょう。")]),s._v(" "),e("h3",{attrs:{id:"サンプルの実行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#サンプルの実行"}},[s._v("#")]),s._v(" サンプルの実行")]),s._v(" "),e("p",[s._v("ダウンロードした"),e("a",{attrs:{href:"https://github.com/iij/ansible-exercise",target:"_blank",rel:"noopener noreferrer"}},[s._v("教材"),e("OutboundLink")],1),s._v("のフォルダ内で下記コマンドを実行しコンテナ内に入る、\nまたはVScodeの"),e("code",[s._v("Remote - Containers")]),s._v("を使い教材のフォルダを開き、コンテナ内に入ります。")]),s._v(" "),e("p",[s._v("Windows")]),s._v(" "),e("div",{staticClass:"language-powershell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[s._v("docker compose "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f docker-compose\\docker-compose"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),s._v("\ndocker exec "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("it docker-compose-ansible-1 bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("Mac/Linux")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" compose -f docker-compose/docker-compose.yml up -d\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it docker-compose-ansible-1 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("続いて"),e("a",{attrs:{href:"https://docs.ansible.com/ansible/latest/cli/ansible.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ansibleコマンド"),e("OutboundLink")],1),s._v("を使って\nアドホックにansibleを実行します。")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("ansible -m "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" db1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-txt line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-txt"}},[e("code",[s._v('db1 | SUCCESS => {\n    "ansible_facts": {\n        "discovered_interpreter_python": "/usr/bin/python"\n    },\n    "changed": false,\n    "ping": "pong"\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("Ansibleは基本的に実行すべき内容（task)を記載したplaybookを作成し、"),e("code",[s._v("ansible-playbook")]),s._v("コマンドを用いて実行するものですが、上記の通りplaybookを作成しなくとも実行できるコマンドもあるため、細かな日々の運用作業や確認作業などに使えます。")]),s._v(" "),e("p",[s._v("なお、"),e("a",{attrs:{href:"https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ansible-playbookコマンド"),e("OutboundLink")],1),s._v("は"),e("code",[s._v("playbook")]),s._v("と呼ばれるYAMLファイルにしたがってAnsibleを実行するコマンドになります。\n今回はAnsibleの実行イメージと出力のイメージを掴んで頂くためにアドホックで実行しましたが以後、このハンズオンでは主に"),e("code",[s._v("ansible-playbook")]),s._v("コマンドを使っていきます。")])])}),[],!1,null,null,null);e.default=t.exports}}]);