(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{573:function(e,a,t){"use strict";t.r(a);var r=t(16),l=Object(r.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"go-tutor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#go-tutor"}},[e._v("#")]),e._v(" go-tutor")]),e._v(" "),a("ul",[a("li",[e._v("dockerfileの更新手順です\n"),a("ul",[a("li",[a("code",[e._v("bootcamp/src/server-app/go/go/src-tutor")]),e._v(" 上で作業することを想定しています")])])]),e._v(" "),a("li",[e._v("本手順は、講義"),a("RouterLink",{attrs:{to:"/server-app/go/"}},[e._v("GoでWebアプリケーションを作る")]),e._v(" で使用するdocker imageの更新手順です\n"),a("ul",[a("li",[e._v("基本的に受講者が行う必要はありません")])])],1)]),e._v(" "),a("h2",{attrs:{id:"_1-update-sample"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-update-sample"}},[e._v("#")]),e._v(" 1. update sample")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("./samples")]),e._v(" 配下を更新してください\n"),a("ul",[a("li",[e._v("docker containerの、"),a("code",[e._v("/go/src/samples")]),e._v(" に mountされます")])])]),e._v(" "),a("li",[a("code",[e._v("./go_tutorial")]),e._v(" 配下を更新してください\n"),a("ul",[a("li",[e._v("docker containerの、"),a("code",[e._v("/go/src/go_tutorial")]),e._v(" に mountされます")])])])]),e._v(" "),a("h2",{attrs:{id:"_2-update-dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-update-dockerfile"}},[e._v("#")]),e._v(" 2. update dockerfile")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("./Dockerfile")]),e._v(" を編集してください\n"),a("ul",[a("li",[e._v("平時の更新対象は以下だけだと思います\n"),a("ul",[a("li",[a("code",[e._v('LABEL maintainer="<your email address>"')])]),e._v(" "),a("li",[a("code",[e._v("ENV GOVERSION <version of golang>")])])])])])])]),e._v(" "),a("h2",{attrs:{id:"_3-image更新やら試験"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-image更新やら試験"}},[e._v("#")]),e._v(" 3. image更新やら試験")]),e._v(" "),a("ol",[a("li",[e._v("build と 動作確認\n"),a("ul",[a("li",[a("code",[e._v("make")]),e._v(" "),a("ul",[a("li",[e._v("docker container の"),a("code",[e._v("/go/src/sampple")]),e._v(" に移動するので、もろもろ試す")]),e._v(" "),a("li",[e._v("試したあとは、exitで良い(--rm で起動しているので、containerの削除は自動)")])])])])]),e._v(" "),a("li",[a("code",[e._v("1. update sample")]),e._v(", "),a("code",[e._v("2. update dockerfile")]),e._v(", 本手順をくり返し、納得のいく構成に更新")])]),e._v(" "),a("h2",{attrs:{id:"_4-build-and-push"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-build-and-push"}},[e._v("#")]),e._v(" 4. build and push")]),e._v(" "),a("ol",[a("li",[e._v("builderの用意"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker buildx create --name <buildername>\ndocker buildx use <buildername>\ndocker buildx inspect --bootstrap\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])])]),e._v(" "),a("li",[e._v("login\n"),a("ul",[a("li",[a("code",[e._v("docker login")])])])]),e._v(" "),a("li",[e._v("build and push"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker buildx build --platform linux/arm64,linux/amd64,linux/386,linux/s390x,linux/arm/v7,linux/arm/v6 -t <username>/go-tutor:<version> --push .\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])]),e._v(" "),a("li",[e._v("logout\n"),a("ul",[a("li",[a("code",[e._v("docker logout")])])])])]),e._v(" "),a("h2",{attrs:{id:"_5-ゴミ掃除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-ゴミ掃除"}},[e._v("#")]),e._v(" 5. ゴミ掃除")]),e._v(" "),a("ol",[a("li",[e._v("tag付け対象削除\n"),a("ul",[a("li",[a("code",[e._v("docker rmi <username>/go-tutor:<version>")])])])]),e._v(" "),a("li",[e._v("その他 作業中のdockerimage\n"),a("ul",[a("li",[a("code",[e._v("make clean")])])])]),e._v(" "),a("li",[e._v("builderの削除"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker buildx use default\ndocker buildx inspect --bootstrap\ndocker buildx stop <buildername>\ndocker buildx rm <buildername>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])])])]),e._v(" "),a("h2",{attrs:{id:"_6-リンクの更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-リンクの更新"}},[e._v("#")]),e._v(" 6. リンクの更新")]),e._v(" "),a("ul",[a("li",[e._v("講義"),a("RouterLink",{attrs:{to:"/server-app/go/"}},[e._v("GoでWebアプリケーションを作る")]),e._v(" で、参照しているpathを書き換えます")],1),e._v(" "),a("li",[e._v("本手順作成時点で確認しているpathは、以下です\n"),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/server-app/go/var/md/init.html"}},[e._v("GoでWebアプリケーションを作る(下準備編)")]),e._v(" "),a("ul",[a("li",[e._v("docker pullしてくる対象のimage名")])])],1)])])])])}),[],!1,null,null,null);a.default=l.exports}}]);