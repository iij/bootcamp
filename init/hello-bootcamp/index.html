<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ハンズオン事前準備 | IIJ Bootcamp</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="ハンズオン事前準備">
    
    <link rel="preload" href="/bootcamp/assets/css/0.styles.095a7d7e.css" as="style"><link rel="preload" href="/bootcamp/assets/js/app.50c447b0.js" as="script"><link rel="preload" href="/bootcamp/assets/js/2.0d322aa6.js" as="script"><link rel="preload" href="/bootcamp/assets/js/26.aeb9c634.js" as="script"><link rel="preload" href="/bootcamp/assets/js/14.c8974a20.js" as="script"><link rel="prefetch" href="/bootcamp/assets/js/10.dd8644f9.js"><link rel="prefetch" href="/bootcamp/assets/js/11.ce6a2bf0.js"><link rel="prefetch" href="/bootcamp/assets/js/12.d25a1efe.js"><link rel="prefetch" href="/bootcamp/assets/js/13.9be8637e.js"><link rel="prefetch" href="/bootcamp/assets/js/15.0b6b2bf6.js"><link rel="prefetch" href="/bootcamp/assets/js/16.e4ade53b.js"><link rel="prefetch" href="/bootcamp/assets/js/17.cb43e59d.js"><link rel="prefetch" href="/bootcamp/assets/js/18.ce9241c0.js"><link rel="prefetch" href="/bootcamp/assets/js/19.5185799d.js"><link rel="prefetch" href="/bootcamp/assets/js/20.27f9c598.js"><link rel="prefetch" href="/bootcamp/assets/js/21.c274a4a1.js"><link rel="prefetch" href="/bootcamp/assets/js/22.cf755e50.js"><link rel="prefetch" href="/bootcamp/assets/js/23.958292cb.js"><link rel="prefetch" href="/bootcamp/assets/js/24.c25183d4.js"><link rel="prefetch" href="/bootcamp/assets/js/25.95aecd73.js"><link rel="prefetch" href="/bootcamp/assets/js/27.f22429f1.js"><link rel="prefetch" href="/bootcamp/assets/js/28.cfb3729c.js"><link rel="prefetch" href="/bootcamp/assets/js/29.a77e9435.js"><link rel="prefetch" href="/bootcamp/assets/js/3.4f3ff0ea.js"><link rel="prefetch" href="/bootcamp/assets/js/30.8900b286.js"><link rel="prefetch" href="/bootcamp/assets/js/31.a310dbc0.js"><link rel="prefetch" href="/bootcamp/assets/js/32.faa73779.js"><link rel="prefetch" href="/bootcamp/assets/js/33.4573c574.js"><link rel="prefetch" href="/bootcamp/assets/js/34.66fe8e77.js"><link rel="prefetch" href="/bootcamp/assets/js/35.f7277e8c.js"><link rel="prefetch" href="/bootcamp/assets/js/36.5a0cdf15.js"><link rel="prefetch" href="/bootcamp/assets/js/37.87be7d87.js"><link rel="prefetch" href="/bootcamp/assets/js/38.9b56dbfc.js"><link rel="prefetch" href="/bootcamp/assets/js/39.2dbc9b8f.js"><link rel="prefetch" href="/bootcamp/assets/js/4.43aacb64.js"><link rel="prefetch" href="/bootcamp/assets/js/40.02c70a18.js"><link rel="prefetch" href="/bootcamp/assets/js/41.7975ab7f.js"><link rel="prefetch" href="/bootcamp/assets/js/42.a0c3de41.js"><link rel="prefetch" href="/bootcamp/assets/js/43.d8893198.js"><link rel="prefetch" href="/bootcamp/assets/js/44.5e7bd4f8.js"><link rel="prefetch" href="/bootcamp/assets/js/45.60543525.js"><link rel="prefetch" href="/bootcamp/assets/js/46.387843f2.js"><link rel="prefetch" href="/bootcamp/assets/js/47.46bf658b.js"><link rel="prefetch" href="/bootcamp/assets/js/48.acbad534.js"><link rel="prefetch" href="/bootcamp/assets/js/49.e4b5002f.js"><link rel="prefetch" href="/bootcamp/assets/js/5.d950eaf0.js"><link rel="prefetch" href="/bootcamp/assets/js/50.f46a345f.js"><link rel="prefetch" href="/bootcamp/assets/js/51.115b10a1.js"><link rel="prefetch" href="/bootcamp/assets/js/52.8a33187a.js"><link rel="prefetch" href="/bootcamp/assets/js/53.12e5254b.js"><link rel="prefetch" href="/bootcamp/assets/js/54.17ab1d3e.js"><link rel="prefetch" href="/bootcamp/assets/js/55.f683cbcb.js"><link rel="prefetch" href="/bootcamp/assets/js/56.22f6bda9.js"><link rel="prefetch" href="/bootcamp/assets/js/57.47e4aee6.js"><link rel="prefetch" href="/bootcamp/assets/js/6.9247dbce.js"><link rel="prefetch" href="/bootcamp/assets/js/7.ac3646d0.js"><link rel="prefetch" href="/bootcamp/assets/js/8.518432a2.js"><link rel="prefetch" href="/bootcamp/assets/js/9.f699ab60.js">
    <link rel="stylesheet" href="/bootcamp/assets/css/0.styles.095a7d7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bootcamp/" class="home-link router-link-active"><!----> <span class="site-name">IIJ Bootcamp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ハンズオン事前準備</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bootcamp/init/hello-bootcamp/#docker-のインストール-check-1" class="sidebar-link">Docker のインストール (Check.1)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#読み方" class="sidebar-link">読み方</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#windows" class="sidebar-link">Windows</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#mac" class="sidebar-link">Mac</a></li></ul></li><li><a href="/bootcamp/init/hello-bootcamp/#hello-docker" class="sidebar-link">Hello Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#ミラーサーバの設定" class="sidebar-link">ミラーサーバの設定</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#hello-world-コンテナを動かす-check-2" class="sidebar-link">hello-world コンテナを動かす (Check.2)</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#失敗した場合" class="sidebar-link">失敗した場合</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#それでもダメな場合-or-違うエラーの場合" class="sidebar-link">それでもダメな場合 or 違うエラーの場合</a></li></ul></li><li><a href="/bootcamp/init/hello-bootcamp/#nginx-を立てて手元で-html-を書き換える" class="sidebar-link">Nginx を立てて手元で HTML を書き換える</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#html-ファイルの作成" class="sidebar-link">HTML ファイルの作成</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#docker-コンテナの起動-check-3" class="sidebar-link">docker コンテナの起動 (Check.3)</a></li><li class="sidebar-sub-header"><a href="/bootcamp/init/hello-bootcamp/#html-ファイルを書き換える" class="sidebar-link">HTML ファイルを書き換える</a></li></ul></li><li><a href="/bootcamp/init/hello-bootcamp/#docker-コンテナのお掃除" class="sidebar-link">Docker コンテナのお掃除</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><table><tr><td>このハンズオンでやること</td><td>ハンズオン事前準備</td></tr> <tr><td>想定時間</td><td>0.5h</td></tr> <tr><td>前提知識・用語</td><td>なし</td></tr></table> <h1 id="page-frontmatter-title"><a href="#page-frontmatter-title" class="header-anchor">#</a> ハンズオン事前準備</h1> <p>各ハンズオンに取り組む前に、各ハンズオン用の環境を <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> で動かせるように準備します。</p> <h2 id="docker-のインストール-check-1"><a href="#docker-のインストール-check-1" class="header-anchor">#</a> Docker のインストール (Check.1)</h2> <p>各 OS やプラットフォームごとのインストール方法はここにドキュメントがあります。
<a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">Install Docker Engine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>この資料では Windows と macOS について、簡単に取り上げます。</p> <h3 id="読み方"><a href="#読み方" class="header-anchor">#</a> 読み方</h3> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>このような 黒枠 になっている部分は 実際にコマンドを打ち込む部分です。 Terminal や コマンドプロンプトなどで入力ください
$ また、 左端の $ や &gt; は プロンプトと言って 実際には入力しません。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>例えば 以下の表記であれば <code>$ docker --version</code> ではなく <code>docker --version</code> とだけ入力してください。
なお、 $ や &gt; から始まらないところ は 出力例です。 こちらも 入力する必要はありません。(以下の例では <code>Docker version 20.10.7, build f0df350</code>)
コピペするときは気をつけてください。</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker --version

Docker version 20.10.7, build f0df350
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="windows"><a href="#windows" class="header-anchor">#</a> Windows</h3> <p>windows の場合 <a href="https://docs.docker.com/docker-for-windows/" target="_blank" rel="noopener noreferrer">Docker Desktop for Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を使うのがおすすめです。WSL や仮想環境に linux を立てることもできますが、ネットワークのトラブルなどが頻発するため現状あまりお勧めしません。</p> <ol><li><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/" target="_blank" rel="noopener noreferrer">ダウンロードページ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> にアクセスし、「Get Docker」をクリックして exe ファイルをダウンロードします。
<ul><li>stable 版で問題ありません</li></ul></li> <li>ダウンロードした exe ファイルをクリックしてインストールします。</li> <li>必要に応じて <a href="https://docs.microsoft.com/ja-jp/windows/wsl/install-win10#step-4---download-the-linux-kernel-update-package" target="_blank" rel="noopener noreferrer">Linux カーネル更新プログラム パッケージ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> のインストールをします。</li> <li>PowerShell やコマンドプロンプトを開き、<code>docker version</code>コマンドが実行できれば成功です。</li></ol> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>&gt;docker --version

Docker version 20.10.7, build f0df350
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="mac"><a href="#mac" class="header-anchor">#</a> Mac</h3> <p>Mac の場合は <a href="https://docs.docker.com/docker-for-mac/" target="_blank" rel="noopener noreferrer">docker-for-mac<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を使います。</p> <ol><li><a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac/" target="_blank" rel="noopener noreferrer">ダウンロードページ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> にアクセスし、「Get Docker」をクリックして dmg ファイルをダウンロードします。</li> <li>ダウンロードした dmg ファイルをクリックしてインストールします。</li> <li>terminal を開き、<code>docker version</code>コマンドが実行できれば成功です。</li></ol> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker --version

Docker version 20.10.6, build 370c289
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="hello-docker"><a href="#hello-docker" class="header-anchor">#</a> Hello Docker</h2> <h3 id="ミラーサーバの設定"><a href="#ミラーサーバの設定" class="header-anchor">#</a> ミラーサーバの設定</h3> <p>（ちょっと長い説明）</p> <p>Dockerで何かコンテナを動かす際にはイメージファイルが必要になります（詳しくはDockerハンズオンで）。
デフォルトではイメージファイルは<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">dockerhub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>というDocker社公式のサービスからダウンロードできますが、少し前から同一IPアドレスから大量にアクセスがあるとアクセス制限がかかるようになりました。</p> <p>会社のネットワークから外部のサイトにアクセスする際は必ずプロキシサーバを経由しますが、社内から全員がdockerhubにアクセスするとプロキシサーバのIPアドレスが簡単にアクセス制限の対象になってしまいます。</p> <p>そこでイメージファイルをキャッシュしておくための社内ミラーサーバが立っていますので、そちらを使う設定を追加します。</p> <p>Dockerのアプリを立ち上げ、Preferences &gt; Docker Engine を開いてください。</p> <p><img src="/bootcamp/assets/img/docker_mirror_config.7454cae9.png" alt="docker engine config"></p> <p>画像では色々と書いてありますが、必要なのは以下の設定です。下記の項目を追加してください。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://&lt;sample&gt;.jp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;insecure-registries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;&lt;sample&gt;.jp&quot;</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ミラーサーバーのURLは社内で利用可能なものを設定してください。</p> <p>記述を追加したら<code>Apply &amp; Restart</code>で再起動します。その後再びterminalから<code>docker system info</code>というコマンドを実行してください。</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker system info

Client:
 Context:    default
 Debug Mode: false
 Plugins:
  app: Docker App (Docker Inc., v0.9.1-beta3)
  buildx: Build with BuildKit (Docker Inc., v0.5.1-docker)
  compose: Docker Compose (Docker Inc., 2.0.0-beta.1)
  scan: Docker Scan (Docker Inc., v0.8.0)

Server:
...
 Insecure Registries:
  &lt;sample&gt;.jp
  127.0.0.0/8
 Registry Mirrors:
  https://&lt;sample&gt;.jp/
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>Insecure Registries</code>と<code>Registry Mirrors</code>に先ほど設定した値が入っていれば成功です。</p> <h3 id="hello-world-コンテナを動かす-check-2"><a href="#hello-world-コンテナを動かす-check-2" class="header-anchor">#</a> hello-world コンテナを動かす (Check.2)</h3> <p>hello-world コンテナをダウンロードして、実際に docker で動かしてみます。</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker run hello-world

Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
b8dfde127a29: Pull complete
Digest: sha256:9f6ad537c5132bcce57f7a0a20e317228d382c3cd61edae14650eec68b2b345c
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>Hello from Docker!</code>が表示されていれば成功です。</p> <h3 id="失敗した場合"><a href="#失敗した場合" class="header-anchor">#</a> 失敗した場合</h3> <p>以下のようなエラーで失敗した場合 proxy の設定が必要な場合があります。</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker run hello-world

Unable to find image 'hello-world:latest' locally
docker: Error response from daemon: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).
See 'docker run --help'.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>「docker {OS 名} proxy」などで検索すると、以下のような記事が検索されると思うので、参考にしながら設定してみてください。</p> <ul><li>Windows: <a href="https://qiita.com/wryun0suke/items/1f4bbd2977ae41ee7a36" target="_blank" rel="noopener noreferrer">https://qiita.com/wryun0suke/items/1f4bbd2977ae41ee7a36<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Mac: <a href="https://qiita.com/kobakou/items/214129924b9cd3e64d0f" target="_blank" rel="noopener noreferrer">https://qiita.com/kobakou/items/214129924b9cd3e64d0f<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>proxy の URL は環境によって異なるため、周りの誰かに確認してください。</p> <h3 id="それでもダメな場合-or-違うエラーの場合"><a href="#それでもダメな場合-or-違うエラーの場合" class="header-anchor">#</a> それでもダメな場合 or 違うエラーの場合</h3> <p>TA や講師など、周りの先輩に遠慮なく声をかけてください。</p> <h2 id="nginx-を立てて手元で-html-を書き換える"><a href="#nginx-を立てて手元で-html-を書き換える" class="header-anchor">#</a> Nginx を立てて手元で HTML を書き換える</h2> <p>次は docker の <a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener noreferrer">volumes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> という機能を使い、コンテナの中のファイルを手元で編集できるようにしてみます。
これができると docker 環境で動かすファイルを手元のエディタで編集できるためとても便利です。</p> <p>ここでは Nginx という web サーバーを使い、簡単な HTML ファイルをホスティングしてみます。そしてその HTML ファイルを手元で書き換えてみましょう。</p> <h3 id="html-ファイルの作成"><a href="#html-ファイルの作成" class="header-anchor">#</a> HTML ファイルの作成</h3> <p>以下のようにディレクトリを作成し、</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ mkdir content
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>その中に <code>index.html</code>  ファイルを作成してください。</p> <p>例えば、 vim を使うなら以下のような コマンド になります。
vim が無い、ほかのを使いたい そんな場合は 各種 メモ帳など自分の好きなエディタを利用してください。
vim から抜けるには ESCキーを押した後「:wq<Enter>」を入力してください。</Enter></p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ vim content/index.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>index.html</code>の内容はなんでもいいですが、例えば以下のようにしてみましょう。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>Hello Bootcamp!
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="docker-コンテナの起動-check-3"><a href="#docker-コンテナの起動-check-3" class="header-anchor">#</a> docker コンテナの起動 (Check.3)</h3> <p><code>index.html</code> ファイルが作成できたら、nginx の docker コンテナを以下のように起動します。</p> <p>いずれも</p> <ul><li><code>--name</code> : test-nginx という名前で</li> <li><code>-p 8080:80</code> : localhost の 8080 port を コンテナの中で 80 port に 転送し</li> <li><code>--mount....</code>: いまのディレクトリの content ディレクトリの内容を コンテナの中で /usr/share/nginx/html の中身として扱い</li> <li><code>-d</code>: daemon (バックグラウンドで実行し続ける)モードで</li> <li><code>nginx</code>: nginx:latest タグ の イメージを使って コンテナを起動する</li></ul> <p>というものになります。</p> <p>windows</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker run --name test-nginx -p 8080:80 --mount type=bind,source=%CD%/content,target=/usr/share/nginx/html,ro -d nginx

47fb496ed83cb26558874e8fd6b6fff4303031a2b24f827a938310ee9646c638
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>mac/linux</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker run --name test-nginx -p 8080:80 --mount type=bind,source=$PWD/content,target=/usr/share/nginx/html,ro -d nginx

47fb496ed83cb26558874e8fd6b6fff4303031a2b24f827a938310ee9646c638
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>エラーなく起動できたら 起動したコンテナのID が表示されます。ここは実行ごとに変わります。</p> <p>ブラウザを開き、<a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">localhost:8080<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （<code>localhost</code>または ssh 先の IP アドレス）にアクセスしてみましょう。「Hello Bootcamp!」が表示されていれば成功です。</p> <p>なお、<code>-d</code> オプションを付けているので、 バックグラウンドで起動し続けています。 再度起動し直してみたい場合は 一度 <code>docker stop</code> する必要があります。お掃除の手順を参照してください。</p> <h3 id="html-ファイルを書き換える"><a href="#html-ファイルを書き換える" class="header-anchor">#</a> HTML ファイルを書き換える</h3> <p>先ほど作成した<code>index.html</code>を編集してみましょう。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>Hello Bootcamp!!!!!!
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>保存してブラウザをリロードしてみてください。ページが更新されていれば成功です。</p> <h2 id="docker-コンテナのお掃除"><a href="#docker-コンテナのお掃除" class="header-anchor">#</a> Docker コンテナのお掃除</h2> <p>最後に Docker コンテナを止めて掃除しておきます。</p> <div class="language-terminal line-numbers-mode"><pre class="language-text"><code>$ docker stop test-nginx
$ docker rm test-nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>以上で事前準備は完了です。お疲れ様でした。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/iij/bootcamp/edit/master/src/init/hello-bootcamp/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/11/2022, 12:34:38 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/bootcamp/assets/js/app.50c447b0.js" defer></script><script src="/bootcamp/assets/js/2.0d322aa6.js" defer></script><script src="/bootcamp/assets/js/26.aeb9c634.js" defer></script><script src="/bootcamp/assets/js/14.c8974a20.js" defer></script>
  </body>
</html>
