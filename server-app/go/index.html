<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GoでWebアプリケーションを作る | IIJ Bootcamp</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Go言語を使って簡単なWebアプリケーションを作ります">
    
    <link rel="preload" href="/bootcamp/assets/css/0.styles.095a7d7e.css" as="style"><link rel="preload" href="/bootcamp/assets/js/app.6d52e188.js" as="script"><link rel="preload" href="/bootcamp/assets/js/2.8be9fd60.js" as="script"><link rel="preload" href="/bootcamp/assets/js/58.03e2fa9d.js" as="script"><link rel="preload" href="/bootcamp/assets/js/18.1d589aab.js" as="script"><link rel="preload" href="/bootcamp/assets/js/17.eba33b98.js" as="script"><link rel="prefetch" href="/bootcamp/assets/js/10.299b8302.js"><link rel="prefetch" href="/bootcamp/assets/js/11.1132ddf4.js"><link rel="prefetch" href="/bootcamp/assets/js/12.13906f61.js"><link rel="prefetch" href="/bootcamp/assets/js/13.33b03da3.js"><link rel="prefetch" href="/bootcamp/assets/js/14.b01a0294.js"><link rel="prefetch" href="/bootcamp/assets/js/15.077431a9.js"><link rel="prefetch" href="/bootcamp/assets/js/16.fc4a53b4.js"><link rel="prefetch" href="/bootcamp/assets/js/19.7070a3f2.js"><link rel="prefetch" href="/bootcamp/assets/js/20.fb716ec8.js"><link rel="prefetch" href="/bootcamp/assets/js/21.0a1cbc38.js"><link rel="prefetch" href="/bootcamp/assets/js/22.b6c9a0d4.js"><link rel="prefetch" href="/bootcamp/assets/js/23.ee032780.js"><link rel="prefetch" href="/bootcamp/assets/js/24.6750592e.js"><link rel="prefetch" href="/bootcamp/assets/js/25.1947468b.js"><link rel="prefetch" href="/bootcamp/assets/js/26.db85e0d0.js"><link rel="prefetch" href="/bootcamp/assets/js/27.f9e1e538.js"><link rel="prefetch" href="/bootcamp/assets/js/28.2a99b424.js"><link rel="prefetch" href="/bootcamp/assets/js/29.abc83417.js"><link rel="prefetch" href="/bootcamp/assets/js/3.7fb194b3.js"><link rel="prefetch" href="/bootcamp/assets/js/30.2cc6d156.js"><link rel="prefetch" href="/bootcamp/assets/js/31.d1e92e59.js"><link rel="prefetch" href="/bootcamp/assets/js/32.7a60ca4d.js"><link rel="prefetch" href="/bootcamp/assets/js/33.b6521a6a.js"><link rel="prefetch" href="/bootcamp/assets/js/34.93dc731b.js"><link rel="prefetch" href="/bootcamp/assets/js/35.a64209f5.js"><link rel="prefetch" href="/bootcamp/assets/js/36.7d1b8dc3.js"><link rel="prefetch" href="/bootcamp/assets/js/37.e33dc2ba.js"><link rel="prefetch" href="/bootcamp/assets/js/38.4c3ac00e.js"><link rel="prefetch" href="/bootcamp/assets/js/39.527c83d0.js"><link rel="prefetch" href="/bootcamp/assets/js/4.fe47842b.js"><link rel="prefetch" href="/bootcamp/assets/js/40.a4681542.js"><link rel="prefetch" href="/bootcamp/assets/js/41.6c2a7485.js"><link rel="prefetch" href="/bootcamp/assets/js/42.b0391732.js"><link rel="prefetch" href="/bootcamp/assets/js/43.befa18f7.js"><link rel="prefetch" href="/bootcamp/assets/js/44.86fae5ed.js"><link rel="prefetch" href="/bootcamp/assets/js/45.cb28e54e.js"><link rel="prefetch" href="/bootcamp/assets/js/46.efba779b.js"><link rel="prefetch" href="/bootcamp/assets/js/47.060fe2a7.js"><link rel="prefetch" href="/bootcamp/assets/js/48.755a9ae9.js"><link rel="prefetch" href="/bootcamp/assets/js/49.97d4cc5a.js"><link rel="prefetch" href="/bootcamp/assets/js/5.506a5586.js"><link rel="prefetch" href="/bootcamp/assets/js/50.5738bd9f.js"><link rel="prefetch" href="/bootcamp/assets/js/51.185e40a9.js"><link rel="prefetch" href="/bootcamp/assets/js/52.11d5174a.js"><link rel="prefetch" href="/bootcamp/assets/js/53.100b8756.js"><link rel="prefetch" href="/bootcamp/assets/js/54.8565cff9.js"><link rel="prefetch" href="/bootcamp/assets/js/55.ffa0b6f5.js"><link rel="prefetch" href="/bootcamp/assets/js/56.30eb6432.js"><link rel="prefetch" href="/bootcamp/assets/js/57.02508781.js"><link rel="prefetch" href="/bootcamp/assets/js/59.8cc23887.js"><link rel="prefetch" href="/bootcamp/assets/js/6.3784fdd2.js"><link rel="prefetch" href="/bootcamp/assets/js/60.4747e135.js"><link rel="prefetch" href="/bootcamp/assets/js/61.0ec08d2b.js"><link rel="prefetch" href="/bootcamp/assets/js/62.71d00987.js"><link rel="prefetch" href="/bootcamp/assets/js/63.d4b90e3c.js"><link rel="prefetch" href="/bootcamp/assets/js/64.685c3c54.js"><link rel="prefetch" href="/bootcamp/assets/js/7.71150ca1.js"><link rel="prefetch" href="/bootcamp/assets/js/8.165bdfa3.js"><link rel="prefetch" href="/bootcamp/assets/js/9.09347b55.js">
    <link rel="stylesheet" href="/bootcamp/assets/css/0.styles.095a7d7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bootcamp/" class="home-link router-link-active"><!----> <span class="site-name">IIJ Bootcamp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>GoでWebアプリケーションを作る</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bootcamp/server-app/go/#_0-1-目的" class="sidebar-link">0.1. 目的</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_0-2-対象者" class="sidebar-link">0.2. 対象者</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_0-3-下準備" class="sidebar-link">0.3. 下準備</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_0-4-本資料の表現" class="sidebar-link">0.4. 本資料の表現</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#解釈例" class="sidebar-link">解釈例</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_1-1-特徴" class="sidebar-link">1.1. 特徴</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_1-1-1-シンプルである" class="sidebar-link">1.1.1. シンプルである</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_1-1-2-標準パッケージが充実している" class="sidebar-link">1.1.2. 標準パッケージが充実している</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_1-1-3-クロスコンパイルが容易" class="sidebar-link">1.1.3. クロスコンパイルが容易</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_1-1-4-周辺ツールが標準で提供される" class="sidebar-link">1.1.4. 周辺ツールが標準で提供される</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_1-1-5-並行プログラミングが文法レベルでサポートされている" class="sidebar-link">1.1.5. 並行プログラミングが文法レベルでサポートされている</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_1-1-6-gopher-がかわいい" class="sidebar-link">1.1.6. Gopher がかわいい</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_1-2-どこで使われているの" class="sidebar-link">1.2. どこで使われているの?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_2-1-goの実行" class="sidebar-link">2.1. Goの実行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_2-1-1-goを動かす" class="sidebar-link">2.1.1. Goを動かす</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_2-2-クロスコンパイルの体験" class="sidebar-link">2.2. クロスコンパイルの体験</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_2-2-1-以下のコマンドを実行して、goをコンパイルしてみましょう。" class="sidebar-link">💻 2.2.1. 以下のコマンドを実行して、Goをコンパイルしてみましょう。</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_3-1-変数の種類" class="sidebar-link">3.1. 変数の種類</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_3-2-変数定義方法" class="sidebar-link">3.2. 変数定義方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_3-3-不具合箇所は、最高の講師に教えてもらおう" class="sidebar-link">3.3. 不具合箇所は、最高の講師に教えてもらおう</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_3-3-1-以下のコマンドを実行して、修正箇所を認識てみよう。" class="sidebar-link">💻 3.3.1. 以下のコマンドを実行して、修正箇所を認識てみよう。</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_3-4-不具合の修正" class="sidebar-link">3.4. 不具合の修正</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_3-3-1-ソースコードを修正し、エラーを無くしてみよう。" class="sidebar-link">💻 3.3.1. ソースコードを修正し、エラーを無くしてみよう。</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_3-4-2-変数定義方法が3種類を全て試してみよう。" class="sidebar-link">🚀 💻 3.4.2. 変数定義方法が3種類を全て試してみよう。</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_4-1-関数の定義" class="sidebar-link">4.1. 関数の定義</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_4-2-関数を書いてみる" class="sidebar-link">4.2. 関数を書いてみる</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_4-2-0-if構文" class="sidebar-link">4.2.0. if構文</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_4-2-1-関数のコーディングを行う" class="sidebar-link">4.2.1. 💻 関数のコーディングを行う</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_4-2-2-goっぽい関数の書き方と、使い方" class="sidebar-link">4.2.2. Goっぽい関数の書き方と、使い方</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_4-3-関数の実行される順番" class="sidebar-link">4.3. 関数の実行される順番</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_5-1-パッケージを使う" class="sidebar-link">5.1. パッケージを使う</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_5-1-1-4章のソースコードを直す" class="sidebar-link">5.1.1. 💻 4章のソースコードを直す</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_5-2-パッケージを作る" class="sidebar-link">5.2. パッケージを作る</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_5-2-1-関数eatのshopパッケージ化" class="sidebar-link">5.2.1. 💻 関数Eatのshopパッケージ化</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_6-1-0-構造体とは" class="sidebar-link">6.1.0. 構造体とは</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_6-1-構造体の定義" class="sidebar-link">6.1. 構造体の定義</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_6-2-構造体への関数の関連付け" class="sidebar-link">6.2. 構造体への関数の関連付け</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_6-2-1-型を利用するスコープ上に、そのまま処理を書く" class="sidebar-link">6.2.1. 型を利用するスコープ上に、そのまま処理を書く</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_6-2-2-型を引数として利用できる関数を定義する" class="sidebar-link">6.2.2. 型を引数として利用できる関数を定義する</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_6-2-3-型をレシーバ引数として関数と関連付けする" class="sidebar-link">6.2.3. 型をレシーバ引数として関数と関連付けする</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_6-3-牛丼屋型と、注文する関数を定義する" class="sidebar-link">6.3. 牛丼屋型と、注文する関数を定義する</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_6-3-1-お店で食べられる牛丼屋型を実行する" class="sidebar-link">6.3.1. 💻 お店で食べられる牛丼屋型を実行する</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_7-0-準備" class="sidebar-link">7.0. 準備</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_7-1-httpを起動する方法" class="sidebar-link">7.1. httpを起動する方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_7-2-はじめてのgo言語webアプリケーション起動" class="sidebar-link">7.2. はじめてのGo言語Webアプリケーション起動</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_7-3-goroutineに触れる" class="sidebar-link">7.3. Goroutineに触れる</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_7-3-1-1座席なwebアプリケーションサーバ体験" class="sidebar-link">7.3.1. 💻 1座席なWebアプリケーションサーバ体験</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_7-3-2-並行プログラミング" class="sidebar-link">7.3.2. 並行プログラミング</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_7-3-3-並行動作するwebアプリケーションサーバ体験" class="sidebar-link">7.3.3. 💻 並行動作するWebアプリケーションサーバ体験</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#_7-4-zakohttpパッケージについて" class="sidebar-link">7.4. zakohttpパッケージについて</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_8-1-go言語でのテストのやり方" class="sidebar-link">8.1. Go言語でのテストのやり方</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/go/#_8-2-テストの実行と修正" class="sidebar-link">8.2. 💻 テストの実行と修正</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/go/#試してみてほしいこと" class="sidebar-link">試してみてほしいこと</a></li></ul></li><li><a href="/bootcamp/server-app/go/#_8-3-その他のテストの書き方" class="sidebar-link">8.3. 🚀 その他のテストの書き方</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><table><tr><td>このハンズオンでやること</td><td>Go言語を使って簡単なWebアプリケーションを作ります</td></tr> <tr><td>想定時間</td><td>2.0h</td></tr> <tr><td>前提知識・用語</td><td>golang</td></tr></table> <h1 id="goでwebアプリケーションを作る"><a href="#goでwebアプリケーションを作る" class="header-anchor">#</a> GoでWebアプリケーションを作る</h1> <h1 id="_0-この講義について-5-min"><a href="#_0-この講義について-5-min" class="header-anchor">#</a> 0. この講義について ( 5 min )</h1> <h2 id="_0-1-目的"><a href="#_0-1-目的" class="header-anchor">#</a> 0.1. 目的</h2> <ul><li>あなたがプログラミングを行う際の選択肢として、Goを挙げられる為の第一歩となること
<ul><li>より、知らない人に知ってもらうことを重要視しています</li></ul></li></ul> <h2 id="_0-2-対象者"><a href="#_0-2-対象者" class="header-anchor">#</a> 0.2. 対象者</h2> <p>想定レベルは以下の通りです。</p> <ul><li>ls, cd 程度のLinuxファイル操作が行える</li> <li>curl の操作が行える</li> <li>実行形式ファイル(.exeなど)という存在を知っている</li> <li><code>if</code>, <code>for</code>, <code>switch case</code> などの、割と多くの言語で近い表現のある構文を知っている</li> <li>関数、引数、戻り値 というキーワードを知っている</li></ul> <p>出来ると理解が捗るスキルは以下の通りです。</p> <ul><li>クラス、メソッド というキーワードを知っている</li> <li>どんな言語(COBOL, Javascript, bash, python, ...) でも良いので、簡単なコーディングを行ったことがある</li></ul> <p>参加者の制限は特に設けていませんが、<br>
Goを知らない方かつ、プログラミング技術をこれから身につけていきたい方へ伝える事に重点をおきコンテンツを作成しています。<br>
そのため、既にGo言語を実用レベルで活用されている方は、退屈かと思われます。</p> <h2 id="_0-3-下準備"><a href="#_0-3-下準備" class="header-anchor">#</a> 0.3. 下準備</h2> <p>事前に、<a href="/bootcamp/server-app/go/var/md/init.html">GoでWebアプリケーションを作る(下準備編)</a> を参考に準備をしてください。<br>
講義内では、下準備に対する質問は回答しません。受講年度の事前質問方法に合わせ、事前に確認してください。</p> <h2 id="_0-4-本資料の表現"><a href="#_0-4-本資料の表現" class="header-anchor">#</a> 0.4. 本資料の表現</h2> <ul><li>💻
<ul><li>受講者が操作する箇所を示します</li></ul></li> <li>♻️
<ul><li>受講者が操作した結果の想定を示します</li></ul></li> <li>🚀
<ul><li>もっと知ってみようのコーナーです。コーディング知識がある方や、今の講義では物足りないと思った方向けの内容です</li></ul></li> <li><code>&lt;ほげほげ&gt;</code> <ul><li>任意の値を示します</li> <li>入力値に本表現が用いられる場合は、任意の値(適切な値)に書き換えてください</li></ul></li> <li><code>$ &lt;コマンド&gt;</code> <ul><li>上記 <code>$</code> は、プロンプトを意味します。実際に入力は行いません</li></ul></li> <li><code>[&lt;要素&gt;]</code> <ul><li>必須では無い要素を<code>[</code>と<code>]</code>で囲みます</li></ul></li> <li><code>#...省略</code> <ul><li>途中要素を省略しています。本来ソースコードなどが存在する予定の場所です</li></ul></li> <li><code>...</code> <ul><li>直前の要素をn回繰り返します</li></ul></li> <li>Go言語ソースコード上の、<code>// &lt;任意のコメント&gt;</code> <ul><li>コメントです。存在する状態でもソースコードが動作します</li></ul></li> <li>💻 の、<code>:# &lt;任意の表現&gt;</code> <ul><li>ハンズオンに対するコメントです。執筆者の任意のコメントもしくは、決まった表現をします</li> <li>決まった表現は、以下です
<ul><li><code>:# WORKPATH &lt;ファイルパス&gt;</code> <ul><li>動作させるカレントディレクトリを示します。<code>cd &lt;ファイルパス&gt;</code> すると、快適にハンズオンを楽しめます</li> <li>省略されている場合、pathの指定はありません。どのようなディレクトリから実行しても出力が同一となる想定です</li></ul></li> <li><code>:# COPY &lt;srcファイルパス&gt; &lt;dstファイルパス&gt;</code> <ul><li>1つ以上前の演習で作成したソースコードを引き継げる演習の場合、コピーするパスを表示しています
<ul><li>記載のファイルパスは、フルパスとしているため、どのようなディレクトリからであっても実行可能です</li></ul></li> <li><code>cp &lt;srcファイルパス&gt; &lt;dstファイルパス&gt;</code> とすることで、引き継ぎができます</li></ul></li> <li><code>:# TERMINAL &lt;識別番号&gt;</code> <ul><li>ハンズオンで利用するターミナルを識別します</li></ul></li></ul></li></ul></li></ul> <h3 id="解釈例"><a href="#解釈例" class="header-anchor">#</a> 解釈例</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 9999999</span>
$ <span class="token function">git</span> clone <span class="token operator">&lt;</span>リモートリポジトリのアドレス<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上記のような記載であり、<br>
&lt;リモートリポジトリのアドレス&gt; に当てはまる値が、<code>git@github.com:iij/bootcamp.git</code> の場合、<br>
ターミナルへ入力する値は、以下のようになります。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> clone git@github.com:iij/bootcamp.git
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="_1-goとは-8-min"><a href="#_1-goとは-8-min" class="header-anchor">#</a> 1. Goとは ( 8 min )</h1> <p>Googleが主導して開発しているプログラミング言語です。<br>
正式名称は、<code>Go</code> ですが、ググラビリティが低いので、<code>Golang</code> <code>golang</code> <code>go言語</code> <code>Go言語</code> <code>go-lang</code> 辺りで表記されていることが多いです。<br>
わざわざ、<a href="https://twitter.com/rob_pike/status/886054143235719169" target="_blank" rel="noopener noreferrer">開発者の一人(Rob Pike 氏) が、ツイート<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> しています。</p> <h2 id="_1-1-特徴"><a href="#_1-1-特徴" class="header-anchor">#</a> 1.1. 特徴</h2> <h3 id="_1-1-1-シンプルである"><a href="#_1-1-1-シンプルである" class="header-anchor">#</a> 1.1.1. シンプルである</h3> <p>設計思想として単純さを是としています。<br> <a href="https://talks.golang.org/2015/simplicity-is-complicated.slide#1" target="_blank" rel="noopener noreferrer">Simplicity is Complicated<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>例えば、言語仕様。使用されるキーワードは25個しかありません。<br> <a href="https://golang.org/ref/spec#Keywords" target="_blank" rel="noopener noreferrer">The Go Programming Language Specification#Keywords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
表現や構造がシンプルであるため、学習コストが低いという側面があります。</p> <h3 id="_1-1-2-標準パッケージが充実している"><a href="#_1-1-2-標準パッケージが充実している" class="header-anchor">#</a> 1.1.2. 標準パッケージが充実している</h3> <p>Go言語の環境を用意するだけで、<a href="https://golang.org/pkg/" target="_blank" rel="noopener noreferrer">標準パッケージ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を扱え、より多くの作業が行えます。</p> <ul><li>testing: テスト記述</li> <li>net/http: HTTPサーバ/クライアントなど</li> <li>encoding: hexやテキスト表現</li> <li>crypto: 暗号関係</li> <li>...</li></ul> <h3 id="_1-1-3-クロスコンパイルが容易"><a href="#_1-1-3-クロスコンパイルが容易" class="header-anchor">#</a> 1.1.3. クロスコンパイルが容易</h3> <p>コンパイル時に、環境変数<code>GOOS</code>や<code>GOARCH</code> を設定するだけで、Windowsの実行形式ファイルやLinuxの実行形式ファイル、macOSの実行形式ファイルを出力することができます。<br>
標準パッケージの多くが、クロスコンパイルされることを前提としているため、標準パッケージを活用することで、環境ごとに不具合の起きづらい開発を行うことが可能です。<br>
例えば、ファイルパスの文字列結合は、<code>&quot;path1&quot; + &quot;\&quot; + &quot;path2&quot;</code> といった表現はせず、<code>path/filepath</code> の関数<code>Join</code> を用い、<code>filepath.Join(&quot;path1&quot;, &quot;path2&quot;)</code>というように表現することをお勧めします。</p> <p>注意しておかなければいけない点としては、一部パッケージには、OS依存のものがあるということです。<br>
例えば、Windowsのレジストリに対する処理のような、OSに依存するものがあります。</p> <h3 id="_1-1-4-周辺ツールが標準で提供される"><a href="#_1-1-4-周辺ツールが標準で提供される" class="header-anchor">#</a> 1.1.4. 周辺ツールが標準で提供される</h3> <p>Go言語をインストールするだけで、パッケージの管理やダウンロード、コンパイル、テスト、字句解析、ドキュメント生成など、多くのことが実行できます。<br> <code>go &lt;subcommand&gt;</code> 形式で、それらのツールを扱うことが可能です。<br>
参考: <a href="https://golang.org/cmd/" target="_blank" rel="noopener noreferrer">コマンド一覧<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_1-1-5-並行プログラミングが文法レベルでサポートされている"><a href="#_1-1-5-並行プログラミングが文法レベルでサポートされている" class="header-anchor">#</a> 1.1.5. 並行プログラミングが文法レベルでサポートされている</h3> <p>とても簡単に並行プログラミングを作成することができます。<br>
並行プログラミングしない場合は、<code>func(){//&lt;yourCode&gt;}()</code> のような形で関数を呼び出せます。<br>
対して、並行プログラミングする場合は、<code>go func(){//&lt;yourCode&gt;}()</code> のような形で関数を呼び出します。<br>
わずか、3 byteほどの差分で並行プログラミングを表すことが可能です。</p> <p>興味のある方は、<a href="https://www.oreilly.co.jp/books/4900900664/" target="_blank" rel="noopener noreferrer">Pthreads プログラミング<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> などの、他言語のマルチスレッド記法を学習すると、<br>
この容易さに感動できるのではないでしょうか。</p> <p>なお、Go言語での並行プログラミングさせたスレッドは、Goroutine(ごーるーちん) と呼びます。</p> <h4 id="goroutineは、カーネルスレッドではありません。"><a href="#goroutineは、カーネルスレッドではありません。" class="header-anchor">#</a> 🚀 Goroutineは、カーネルスレッドではありません。</h4> <p>OSのカーネルスレッドとは異なり、ユーザ空間で動作する軽量なスレッドです。<br>
それぞれのGoroutineの管理（スケジューリングなど）も、1つのユーザ空間スレッドとして動作しています。</p> <h3 id="_1-1-6-gopher-がかわいい"><a href="#_1-1-6-gopher-がかわいい" class="header-anchor">#</a> 1.1.6. Gopher がかわいい</h3> <p>RFC1436 の <a href="https://ja.wikipedia.org/wiki/Gopher" target="_blank" rel="noopener noreferrer">Gopher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ではありません。<br>
Go の <a href="https://golang.org/doc/gopher/gopherbw.png" target="_blank" rel="noopener noreferrer">Gopher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> がかわいいです。</p> <h2 id="_1-2-どこで使われているの"><a href="#_1-2-どこで使われているの" class="header-anchor">#</a> 1.2. どこで使われているの?</h2> <p>本講義でも活用している、<a href="https://github.com/docker/docker-ce" target="_blank" rel="noopener noreferrer">Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> で扱われています。<br>
また、具体的なサービス名は見つけられませんが、<a href="https://github.com/golang/go/wiki/GoUsers#japan" target="_blank" rel="noopener noreferrer">Go言語の日本ユーザ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> にある通り、一度は聞いたことがありそうなサービスにGoが関わっているのかもしれませんね。</p> <p>他にも、軽量なGit Webサービスのプロジェクト <a href="https://gitea.io/en-us/" target="_blank" rel="noopener noreferrer">Gitea<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> のような、Go言語の特徴を活かしたOSSはいくつもあります。<br>
ぜひ探してみてください。</p> <h1 id="ハンズオンの開始"><a href="#ハンズオンの開始" class="header-anchor">#</a> ハンズオンの開始</h1> <p>以降の章では、事前準備したDockerを用い、ハンズオンを行います。</p> <p>特別な注釈がない限り、実施するプロンプトは、コンテナ上です。<br>
もしコンテナを実行していないようであれあば、以下のコマンドを実行してください。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>

<span class="token builtin class-name">:</span><span class="token comment"># vim,emacs,nano派の人はこちら</span>
$ <span class="token function">docker</span> run --name go-tutor -it --rm jo7oem/go-tutor:v2022 /bin/bash

<span class="token builtin class-name">:</span><span class="token comment"># VSCode派の人はこちら</span>
$ <span class="token function">docker</span> run --name go-tutor-vscode -p <span class="token number">8888</span>:8888 -d --rm jo7oem/go-tutor-vscode:v2022
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ハンズオンでは、こちらから指示したpathに、ディレクトリやファイルを作成してもらい、Go言語に触れてもらいます。<br>
基本的なフォルダ構成は、 <code>/go/src/go_tutorial/&lt;セクション名&gt;/&lt;プログラム名&gt;/***.go</code> のようになります。</p> <p>講師側が説明で用いるソースコード（答え）は、<code>/go/src/samples/&lt;セクション名&gt;/&lt;プログラム名&gt;/***.go</code> の形で格納してあります。<br>
講師側が想定している出力結果を確認したい際は、<code>/go/src/samples/</code>配下を実行することで、容易に確認できます。<br>
また、ハンズオンがうまく行かない際には、以下のように差分を確認することで、課題解決を助ける可能性があります。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
$ <span class="token function">diff</span> /go/src/go_tutorial/<span class="token operator">&lt;</span>セクション名<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>プログラム名<span class="token operator">&gt;</span>/***.go /go/src/samples/<span class="token operator">&lt;</span>セクション名<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>プログラム名<span class="token operator">&gt;</span>/***.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="_2-hello-world-10-min"><a href="#_2-hello-world-10-min" class="header-anchor">#</a> 2. Hello, World ( 10 min )</h1> <p>本章では、Go言語の実行方法とコンパイル方法を確認します。</p> <h2 id="_2-1-goの実行"><a href="#_2-1-goの実行" class="header-anchor">#</a> 2.1. Goの実行</h2> <h3 id="_2-1-1-goを動かす"><a href="#_2-1-1-goを動かす" class="header-anchor">#</a> 2.1.1. Goを動かす</h3> <p>Go言語で作成されたソースコードの実行方法は2つあります。<br>
ソースコードをコンパイル（<code>go build</code>）し、実行形式ファイル（.exe等）を実行する方法と、<br>
ソースコードをスクリプト言語のように実行する<code>go run</code>コマンドを用いる方法です。</p> <h4 id="_2-1-1-1-以下のコマンドを実行して、goを動かしてみよう"><a href="#_2-1-1-1-以下のコマンドを実行して、goを動かしてみよう" class="header-anchor">#</a> 💻 2.1.1.1. 以下のコマンドを実行して、Goを動かしてみよう</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/2_helloworld/hello/</span>

$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/2_helloworld/hello/ 
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> main.go
$ go run main.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>/go/src/go_tutorial/2_helloworld/hello/main.go<div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, W0rld!!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <p>♻️ 2.1.1.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>

$ go run main.go
Hello, W0rld<span class="token operator">!</span><span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-1-1-2-以下のコマンドを実行して、goをコンパイルしてみよう。"><a href="#_2-1-1-2-以下のコマンドを実行して、goをコンパイルしてみよう。" class="header-anchor">#</a> 💻 2.1.1.2. 以下のコマンドを実行して、Goをコンパイルしてみよう。</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/2_helloworld/hello/</span>

$ go build main.go
$ <span class="token function">ls</span>
$ <span class="token function">file</span> ./main
$ ./main
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>♻️ 2.1.1.2. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/2_helloworld/hello/</span>

$ go build main.go
$ <span class="token function">ls</span>
main  main.go
$ <span class="token function">file</span> ./main
main: ELF <span class="token number">64</span>-bit LSB executable, x86-64, version <span class="token number">1</span> <span class="token punctuation">(</span>SYSV<span class="token punctuation">)</span>, statically linked, Go <span class="token assign-left variable">BuildID</span><span class="token operator">=</span>h4I-IJqcIkOGZEY8aOXG/Oavgb_mM-7UzeuwNWOCx/iNm526Mrqo9Tb59n0e8A/SZ9SbxL4eRIc7JGiMfDO, not stripped
$ ./main
Hello, W0rld<span class="token operator">!</span><span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>おめでとうございます。これで、あなたもGopherの友達です。<br>
記念にぬいぐるみのGopherを机に飾っても良いでしょう。</p> <h2 id="_2-2-クロスコンパイルの体験"><a href="#_2-2-クロスコンパイルの体験" class="header-anchor">#</a> 2.2. クロスコンパイルの体験</h2> <p>きっと便利ツールを作ってお手元のWindowsで動かしたくなることもあるでしょう。<br> <a href="#113-%E3%82%AF%E3%83%AD%E3%82%B9%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%8C%E5%AE%B9%E6%98%93">1.1.3. クロスコンパイルが容易</a> でも触れた通り、簡単に作成できることを確認してもらいます。</p> <h3 id="_2-2-1-以下のコマンドを実行して、goをコンパイルしてみましょう。"><a href="#_2-2-1-以下のコマンドを実行して、goをコンパイルしてみましょう。" class="header-anchor">#</a> 💻 2.2.1. 以下のコマンドを実行して、Goをコンパイルしてみましょう。</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/2_helloworld/hello/</span>

$ <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build main.go
$ <span class="token function">ls</span>
$ <span class="token function">file</span> ./main.exe
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>♻️ 2.2.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/2_helloworld/hello/</span>

$ <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build main.go
$ <span class="token function">ls</span>
main main.exe main.go
$ <span class="token function">file</span> ./main.exe
main.exe: PE32+ executable <span class="token punctuation">(</span>console<span class="token punctuation">)</span> x86-64 <span class="token punctuation">(</span>stripped to external PDB<span class="token punctuation">)</span>, <span class="token keyword">for</span> MS Windows
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="tips-クロスコンパイル先の対象一覧"><a href="#tips-クロスコンパイル先の対象一覧" class="header-anchor">#</a> Tips: クロスコンパイル先の対象一覧</h5> <p>クロスコンパイル時に指定する環境変数(<code>GOOS</code>, <code>GOARCH</code>)へ指定できる値は、<code>go tool dist list</code> というコマンドで確認できます。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ go tool dist list
aix/ppc64
android/386
android/amd64
android/arm
android/arm64
<span class="token comment">#...省略</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="_3-変数とその定義方法-15-min"><a href="#_3-変数とその定義方法-15-min" class="header-anchor">#</a> 3. 変数とその定義方法 ( 15 min )</h1> <p>本章では、変数とその定義方法についての確認と、変数定義に失敗しているソースコードを修正してもらいます。</p> <h2 id="_3-1-変数の種類"><a href="#_3-1-変数の種類" class="header-anchor">#</a> 3.1. 変数の種類</h2> <p>Go言語は、静的型付け言語であるためコンパイル時に変数に紐付いた型の情報に整合性があるか検証されます。
この講義では深く触れませんが、下にGo言語における方の種類について簡単な説明を記載します。
興味のある方は<a href="https://go.dev/ref/spec#Types" target="_blank" rel="noopener noreferrer">公式ドキュメント<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を見てみてください。</p> <ul><li><p>組み込み型</p> <ul><li>整数
<ul><li><code>int</code>,<code>int8</code>,<code>int16</code>,<code>int32</code>,<code>int64</code></li> <li><code>uint</code>,<code>uint8</code>,<code>uint16</code>,<code>uint32</code>,<code>uint64</code></li> <li><code>uintptr</code></li> <li><code>byte</code> <ul><li>🚀 uint8 のエイリアス(別名)です</li></ul></li> <li><code>rune</code> <ul><li>🚀 int32 のエイリアス(別名)です</li></ul></li></ul></li> <li>浮動小数点
<ul><li><code>float32</code>,<code>float64</code></li></ul></li> <li>複素数
<ul><li><code>complex64</code>,<code>complex128</code></li></ul></li> <li>文字列
<ul><li><p><code>string</code></p> <p>🚀 <code>string</code>を構成する文字は<code>rune</code>で構成されます</p></li></ul></li> <li>真偽値
<ul><li><code>bool</code></li></ul></li> <li>エラー
<ul><li><code>error</code></li></ul></li></ul></li> <li><p>コンポジット型</p> <p>0個以上の変数をひとまとまりの集合として表した型です</p> <ul><li>構造体 (<code>struct</code>)</li> <li>配列 (<code>array</code>)</li> <li>スライス (<code>slice</code>)</li> <li>マップ (<code>map</code>)</li> <li>チャンネル (<code>channel</code>)</li></ul></li> <li><p>ユーザー定義型</p> <p>組み込み型やコンポジット型を元にユーザーが定義した型です</p></li> <li><p><code>Interface型</code></p> <p>🚀 これまで説明した型はデータがメモリ上にどのように表現されているかという観点から区別されていました。
この<code>interface型</code>は方がどう振る舞うか(型にどんなメソッドが実装されているか)という観点で区別され、0個以上のメソッドから構成されます。
また、<a href="https://tip.golang.org/doc/go1.18#generics" target="_blank" rel="noopener noreferrer">Go1.18からGenericsが追加<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>されました。これにより、<code>interface</code>に型の情報を組み込むことができるようになりました。</p></li></ul> <h2 id="_3-2-変数定義方法"><a href="#_3-2-変数定義方法" class="header-anchor">#</a> 3.2. 変数定義方法</h2> <p>Go言語では、変数の定義方法が3つあります。</p> <ol><li><code>var &lt;変数名&gt; &lt;型&gt;</code> <ul><li>例: <code>var Hensu string</code></li> <li>型指定有り。変数初期値の指定無し(stringなので、<code>&quot;&quot;</code>になります。)</li></ul></li> <li><code>&lt;変数名&gt; := &lt;初期値&gt;</code> <ul><li>例: <code>Hensu := &quot;myValue&quot;</code></li> <li>型指定無し。代入元の型を引き継ぐ</li></ul></li> <li><code>var &lt;変数名&gt; &lt;型&gt; = &lt;初期値&gt;</code> <ul><li>例: <code>var Hensu string = &quot;myValue&quot;</code></li> <li>型指定有り。変数初期値の指定有り</li></ul></li></ol> <p>予期せぬ型が変数に定義されないよう、最初のうち（書いている型をイメージできるまで）は、1か3の書き方をお勧めします。<br>
予期せぬ型が変数に定義されうる例として、<code>interface型</code> があります。<br>
本講義では、<code>interface型</code> は扱わない為説明は割愛しますが、<code>なんでも型(any)</code> のような使い方ができます。<br>
変数<code>なんでも型</code>が示しているのは、int型だと思っていたらstring型だった。というようなケースもおきえるので、注意が必要です。</p> <h5 id="tips-privateとpublicの指定方法"><a href="#tips-privateとpublicの指定方法" class="header-anchor">#</a> 🚀 Tips: privateとPublicの指定方法</h5> <p>Go言語の名前空間は、<code>private</code>は先頭小文字。<code>Public</code>が先頭大文字と決まっています。<br>
packageに含める要素（変数や関数、構造体や構造体の要素など）をpackageの外部から参照させたい場合、先頭大文字の変数名とするようご注意ください。</p> <h2 id="_3-3-不具合箇所は、最高の講師に教えてもらおう"><a href="#_3-3-不具合箇所は、最高の講師に教えてもらおう" class="header-anchor">#</a> 3.3. 不具合箇所は、最高の講師に教えてもらおう</h2> <p>Go言語では、書き方を間違えているととても丁寧に教えてくれる強い味方がいます。<br>
それは、コンパイラ（<code>go build</code>）です。<br>
「うーん、あ、この辺のソースみた？」とだけ返してくる先輩に比べ、「3行目、6文字目。変数定義されていないよ！？」と場所まで指定して教えてくれます。<br>
変数定義方法で、1や3を勧めた理由の1つとして、型が異なる場合にコンパイラに教えてもらえる可能性が高まるためというのもあります。</p> <p>ちょっと厳しい点があるとすれば、指摘が英語な点でしょうか。<br>
中学生レベルの英語と、単語を調べる力があれば解決できる文章しか出てこないので、ぜひ<code>go build</code>大先生に弟子入りしてみてください。</p> <h5 id="tips-一度に教えてくれる量は限りがある"><a href="#tips-一度に教えてくれる量は限りがある" class="header-anchor">#</a> Tips: 一度に教えてくれる量は限りがある</h5> <p>エラーが多いと、数個のエラーの後に<code>too many error....</code>と続き、全てのエラーを教えてくれないことがあります。<br>
しょうがないので、教えてもらっているエラーから対処していきましょう。</p> <h3 id="_3-3-1-以下のコマンドを実行して、修正箇所を認識てみよう。"><a href="#_3-3-1-以下のコマンドを実行して、修正箇所を認識てみよう。" class="header-anchor">#</a> 💻 3.3.1. 以下のコマンドを実行して、修正箇所を認識てみよう。</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/3_var/plzfixme/</span>

$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/3_var/plzfixme/
$ go run main.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>♻️ 3.3.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/3_var/plzfixme/</span>

$ go run main.go
<span class="token comment"># command-line-arguments</span>
./main.go:6:2: undefined: WatashiNoHensu
./main.go:7:14: undefined: WatashiNoHensu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_3-4-不具合の修正"><a href="#_3-4-不具合の修正" class="header-anchor">#</a> 3.4. 不具合の修正</h2> <h3 id="_3-3-1-ソースコードを修正し、エラーを無くしてみよう。"><a href="#_3-3-1-ソースコードを修正し、エラーを無くしてみよう。" class="header-anchor">#</a> 💻 3.3.1. ソースコードを修正し、エラーを無くしてみよう。</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/3_var/plzfixme/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> main.go
$ go run main.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>/go/src/go_tutorial/3_var/plzfixme/main.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Watashi_no_Hensu <span class="token operator">=</span> <span class="token string">&quot;GYUDON&quot;</span>       <span class="token comment">//./main.go:6:2: undefined: Watashi_no_Hensu</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Watashi_no_Hensu<span class="token punctuation">)</span>     <span class="token comment">//./main.go:7:14: undefined: Watashi_no_Hensu</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <p>♻️ 3.4.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/3_var/plzfixme/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> main.go
$ go run main.go
GYUDON
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-4-2-変数定義方法が3種類を全て試してみよう。"><a href="#_3-4-2-変数定義方法が3種類を全て試してみよう。" class="header-anchor">#</a> 🚀 💻 3.4.2. 変数定義方法が3種類を全て試してみよう。</h3> <h1 id="_4-関数-10-min"><a href="#_4-関数-10-min" class="header-anchor">#</a> 4. 関数 ( 10 min )</h1> <p>本章では、関数の定義方法と、Goっぽい関数の扱われ方について、確認してもらいます。</p> <h2 id="_4-1-関数の定義"><a href="#_4-1-関数の定義" class="header-anchor">#</a> 4.1. 関数の定義</h2> <p>Go言語では、<code>func</code>から始まる形で、関数を定義できます。フォーマットは以下の通りです。</p> <p>🚀</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token operator">&lt;</span>関数名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>型パラメータ<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>型パラメータ<span class="token number">2</span><span class="token operator">&gt;</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>引数<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>引数<span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>戻り値<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>戻り値<span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span>処理<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>このフォーマットをみてわかる通り、Go言語では、複数の戻り値を指定できます。</p> <p>なお、引数、戻り値がない場合は、省略可能なため、最も短い関数の定義は、以下のようになります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span>処理<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>引数がいくつか存在し、戻り値が1つだけの場合は、以下のようになります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> find <span class="token builtin">bool</span>
	<span class="token operator">&lt;</span>処理<span class="token operator">&gt;</span>
	<span class="token keyword">return</span> find
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>また、戻り値が複数になると、戻り値の型をかっこで囲む必要があります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> find <span class="token builtin">bool</span>
	<span class="token keyword">var</span> result <span class="token builtin">error</span>
	<span class="token operator">&lt;</span>処理<span class="token operator">&gt;</span>
	<span class="token keyword">return</span> find<span class="token punctuation">,</span> result
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>関数の基本的な定義方法は以上です。</p> <h5 id="変数名を戻り値の定義で、合わせて定義する方法もあります。"><a href="#変数名を戻り値の定義で、合わせて定義する方法もあります。" class="header-anchor">#</a> 🚀 変数名を戻り値の定義で、合わせて定義する方法もあります。</h5> <p>変数の名前スコープが、関数内全体のスコープになり、認識すべき範囲が広がるため、執筆者は、あまり扱いません。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>find <span class="token builtin">bool</span><span class="token punctuation">,</span> result <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span>処理<span class="token operator">&gt;</span>
	<span class="token keyword">return</span> find<span class="token punctuation">,</span> result
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="型パラメータの使用-generics"><a href="#型パラメータの使用-generics" class="header-anchor">#</a> 🚀 型パラメータの使用 (Generics)</h5> <p><code>interface型</code>を用いることで任意の型を受け付けられる関数を作成できます。
便利なようですが、実行時に型を解決するため意図しない挙動を取る可能性があります。
Go1.18でGenericsが導入されコンパイル時に型を解決することが可能になりました。
興味のあるひとは<a href="https://go.dev/doc/tutorial/generics" target="_blank" rel="noopener noreferrer">Genericsのチュートリアル<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>をやってみてください。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Number <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token builtin">int64</span> <span class="token operator">|</span> <span class="token builtin">float64</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> myFunc<span class="token punctuation">[</span>T any<span class="token punctuation">,</span>N Number<span class="token punctuation">]</span><span class="token punctuation">(</span>hoge <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> fuga N<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>T <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span>処理<span class="token operator">&gt;</span>
	<span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_4-2-関数を書いてみる"><a href="#_4-2-関数を書いてみる" class="header-anchor">#</a> 4.2. 関数を書いてみる</h2> <p>第3章で、修正したソースコードを更新してもらいます。<br>
作成する関数は、渡された牛丼名を食べる関数です。<br>
本講義で行えることは限られるので、行為を以下のように定義します。</p> <ul><li>空白以外の文字列を全て牛丼名とみなす</li> <li>食べる行為は、標準出力とする
<ul><li>本章では、<code>fmt.Println</code> を用いて、文字列を出力します</li></ul></li> <li>食べた場合は、<code>true</code>, 食べたい無い場合は、<code>false</code>を返す</li></ul> <h2 id="_4-2-0-if構文"><a href="#_4-2-0-if構文" class="header-anchor">#</a> 4.2.0. if構文</h2> <p>本章のハンズオンでは、上述した定義を表すために、条件分岐が必要となります。<br>
条件分岐を表すための、Go言語によるif構文の書き方を先に紹介します。</p> <p>基本的なif構文は、以下の通りです。<br>
本講義では割愛しますが、<code>else if</code>や、<code>else</code>を続ける表現もあります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> <span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span><span class="token boolean">true</span>処理<span class="token operator">&gt;</span><span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>具体例は、以下のような表現となります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> val1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span>
	<span class="token keyword">var</span> val2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span>
	<span class="token keyword">if</span> val1 <span class="token operator">==</span> val2 <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;True!&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>この例では、<code>val1 == val2</code> が条件式となり、bool値（<code>True</code> or <code>False</code>) を返却。それを元にifで条件分岐する流れを表しています。</p> <p>この他に、Go言語では、ifの中で関数の戻り値を変数に代入し、変数を条件の要素とする書き方もあります。<br>
構文は以下のようになります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> <span class="token operator">&lt;</span>判定要変数<span class="token operator">&gt;</span><span class="token operator">...</span> <span class="token operator">:=</span> <span class="token operator">&lt;</span>関数<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span>判定式 <span class="token boolean">true</span>処理<span class="token operator">&gt;</span><span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>具体例は、以下のような表現となります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
#<span class="token operator">...</span>省略

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> res <span class="token operator">:=</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>res <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;False&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>myTest()</code>が、bool値(<code>True</code> or <code>False</code>) を返却し、resへ代入します。そして、<code>;</code>の後に続く条件式(<code>!res</code>)の結果に応じて条件分岐します。</p> <h2 id="_4-2-1-関数のコーディングを行う"><a href="#_4-2-1-関数のコーディングを行う" class="header-anchor">#</a> 4.2.1. 💻 関数のコーディングを行う</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/4_funcy/monkey/</span>

$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/4_funcy/monkey/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> eaters.go
$ go run eaters.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>/go/src/go_tutorial/4_funcy/monkey/eaters.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token operator">&lt;</span>nameが空白か比較する<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>nameが空白ならば<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
		<span class="token operator">&lt;</span><span class="token string">`return false`</span>を行う<span class="token operator">&gt;</span>
	 <span class="token punctuation">}</span>
	<span class="token operator">&lt;</span>nameが空白以外ならば、<span class="token string">`fmt.Println(name)`</span>を実行し、<span class="token string">`return true`</span>を行う<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;GYUDON&quot;</span>
	<span class="token keyword">if</span> ok <span class="token operator">:=</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cannt eat: &quot;</span><span class="token punctuation">,</span> name1<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> name2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
	<span class="token keyword">if</span> ok <span class="token operator">:=</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cannt eat: &quot;</span><span class="token punctuation">,</span> name2<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ul> <p>♻️ 4.2.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/4_funcy/monkey/</span>

$ go run eaters.go
GYUDON
cannt eat: 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>さて、既にお気づきの方もいると思いますが、<code>if ok := Eat(name1); !ok {</code> などの表現は、冗長です。</p> <p>変数に代入せず、<code>if !Eat(name1) {</code> というような表現であっても動作します。<br>
こちらの表現の方が、シンプルです。可読性や処理の観点からも良さそうです。</p> <p>しかし、Goっぽい関数を扱う場合に、シンプルな表現は、活用できないケースがあります。</p> <h3 id="_4-2-2-goっぽい関数の書き方と、使い方"><a href="#_4-2-2-goっぽい関数の書き方と、使い方" class="header-anchor">#</a> 4.2.2. Goっぽい関数の書き方と、使い方</h3> <p>Go言語の関数は、戻り値を複数返せる特徴を持っています。</p> <p>この特徴を活用した、よく使われる表現として、関数の実行内容と、処理結果それぞれを戻り値で返却するというものが挙げられます。<br>
例えば、以下のような関数です。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
#<span class="token operator">...</span>省略
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>この例では、第一戻り値に、書き込んだ文字数を返し、<br>
第二戻り値に、問題なく書き込めたかどうかを判定するbool値を返却しています。</p> <p>この関数<code>Writer()</code>は、複数の戻り値を持つため、ifに、bool値だけを渡すことができません。<br>
その為、この関数のbool値だけを用いて条件分岐を行う場合には、<br>
第一戻り値を捨て、第二戻り値だけを変数へ代入するというような記法が必要となります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token function">Writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cannot write&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（任意の戻り値を捨てるには、<code>_</code>へ代入します。全て捨てる場合は、代入自体が不要です。）</p> <p>今回は、説明の例として、boolによる成功可否の判定を挙げましたが、<br>
Go言語では、エラー状態を格納できるerror型を用いることが多くあります。</p> <p>なお、error型は、ifがbool型を渡されたように判定することはできません。<br>
そのため、error型の空の状態（<code>nil</code>）をエラーではない状態として、それと比較することで条件分岐を行う書き方が多く扱われています。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
#<span class="token operator">...</span>省略
<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cannot write&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-2-2-1-goっぽい関数を実行してみる"><a href="#_4-2-2-1-goっぽい関数を実行してみる" class="header-anchor">#</a> 4.2.2.1. 💻 Goっぽい関数を実行してみる</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># COPY /go/src/go_tutorial/4_funcy/monkey/eaters.go /go/src/go_tutorial/4_funcy/likego/eaters.go</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/4_funcy/likego/</span>

$ <span class="token function">cp</span> /go/src/go_tutorial/4_funcy/monkey/eaters.go /go/src/go_tutorial/4_funcy/likego/eaters.go
$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/4_funcy/likego/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> eaters.go
$ go run eaters.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>/go/src/go_tutorial/4_funcy/likego/eaters.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;name is empty.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;GYUDON&quot;</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cannot eat: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> name2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cannot eat: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ul> <p>♻️ 4.2.2.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/4_funcy/likego/</span>

$ go run eaters.go
GYUDON
cannot eat: name is empty.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_4-2-2-2-変数スコープの注意事項"><a href="#_4-2-2-2-変数スコープの注意事項" class="header-anchor">#</a> 4.2.2.2. 🚀 変数スコープの注意事項</h4> <p>戻り値の変数を後ほど活用する場合は、スコープに注意してください。<br>
例えば、ファイル読み込みなどで、(<code>読み込んだ文字列</code>, <code>error</code>) のペアが戻り値となるケースです。<br>
例1では、第一戻り値が、ifのスコープ内となり、後続処理で活用できません。<br>
例2のように、ifの手前で一度変数を定義する必要があります。</p> <ul><li>例1<div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">FileReader</span><span class="token punctuation">(</span>file_path <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
#<span class="token operator">...</span>省略

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> fpath <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;c:\mydata\data.txt&quot;</span>
	<span class="token keyword">if</span> body<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">FileReader</span><span class="token punctuation">(</span>fpath<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// ここでは body がスコープ外</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li>例2<div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">FileReader</span><span class="token punctuation">(</span>file_path <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
#<span class="token operator">...</span>省略

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> fpath <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;c:\mydata\data.txt&quot;</span>
	body<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">FileReader</span><span class="token punctuation">(</span>fpath<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// body がスコープ内（で、扱える）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <h2 id="_4-3-関数の実行される順番"><a href="#_4-3-関数の実行される順番" class="header-anchor">#</a> 4.3. 関数の実行される順番</h2> <p>Go言語では、<code>func main(){}</code> が、実行されます。<br>
そのため、仮に以下のようなソースコードを実行すると、<code>runtime.main_main·f: function main is undeclared in the main package</code> と、main関数が見つからないエラーが表示されます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">MySuperFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> value <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;GYUDON&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="init関数"><a href="#init関数" class="header-anchor">#</a> 🚀 <code>init</code>関数</h5> <p><code>func main(){}</code> よりも先に実行される、<code>func init(){}</code> という関数があります。<br>
後ほど触れるパッケージで、初期化処理を行いたいケースなどで活用できます。</p> <h1 id="_5-パッケージ-10-min"><a href="#_5-パッケージ-10-min" class="header-anchor">#</a> 5. パッケージ ( 10 min )</h1> <p>本章では、パッケージの参照方法と、実際にパッケージの作成を試してもらいます。</p> <h2 id="_5-1-パッケージを使う"><a href="#_5-1-パッケージを使う" class="header-anchor">#</a> 5.1. パッケージを使う</h2> <p>実は既に、何度も登場している、<code>import fmt</code> が、パッケージ名fmtを使います。という表現です。<br> <code>import &lt;パッケージ名&gt;</code> を増やすことで、他のパッケージを活用できます。<br>
複数のパッケージのimportでは、以下のように<code>()</code>でまとめることで、より文字数の少ない書き方もできます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_5-1-1-4章のソースコードを直す"><a href="#_5-1-1-4章のソースコードを直す" class="header-anchor">#</a> 5.1.1. 💻 4章のソースコードを直す</h2> <p>4章で作成したソースコードには、修正すべき問題があります。<br>
それは、エラー時の出力先と、正常時の出力先が同じstdoutであることです。</p> <p><code>fmt</code>に含まれる、<code>Print</code>関係の関数には、出力先を指定できるものが存在します。<br>
出力先を指定できる関数を用い、エラー出力をstderrに出力するよう修正してもらいます。<br>
実行時は、stdoutを捨てる(<code>&gt; /dev/null</code>)すると、差分がわかることでしょう。</p> <p>なお、Go言語のstderr定数は、<code>os</code>パッケージの、<code>os.Stderr</code>として存在するため、追加で、<code>os</code>パッケージのインポートください。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/5_package/fixFunckyMonkey/</span>

$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/5_package/fixFunckyMonkey/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> eaters.go
$ go run eaters.go
$ go run eaters.go <span class="token operator">&gt;</span> /dev/null
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>/go/src/go_tutorial/5_package/fixFunckyMonkey/eaters.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span> <span class="token comment">//追加</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;name is empty.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;GYUDON&quot;</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;cannot eat: '%s'\n&quot;</span> <span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">//更新</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> name2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;cannot eat: '%s'\n&quot;</span> <span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">//更新</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li></ul> <p>♻️ 5.1.1 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/5_package/fixFunckyMonkey/</span>

$ go run eaters.go
GYUDON
cannot eat: <span class="token string">'name is empty.'</span>
$ go run eaters.go <span class="token operator">&gt;</span> /dev/null
cannot eat: <span class="token string">'name is empty.'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_5-2-パッケージを作る"><a href="#_5-2-パッケージを作る" class="header-anchor">#</a> 5.2. パッケージを作る</h2> <p>実は既に、mainパッケージを何度も作成しています。<br>
1行目に書いている<code>package main</code> です。<br> <code>package &lt;パッケージ名&gt;</code>と、先頭に書くことで、パッケージ名を定義できます。<br> <code>package main</code>は、それを起点として実行できる決められたパッケージ名です。<br>
今回は、main以外の任意の名前が指定可能な、起点から呼び出されるパッケージを作成してもらいます。</p> <h3 id="_5-2-1-関数eatのshopパッケージ化"><a href="#_5-2-1-関数eatのshopパッケージ化" class="header-anchor">#</a> 5.2.1. 💻 関数Eatのshopパッケージ化</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># COPY /go/src/go_tutorial/5_package/fixFunckyMonkey/eaters.go /go/src/go_tutorial/5_package/notKinkyuJi/eaters.go</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/5_package/notKinkyuJi/</span>

$ <span class="token function">cp</span> /go/src/go_tutorial/5_package/fixFunckyMonkey/eaters.go /go/src/go_tutorial/5_package/notKinkyuJi/eaters.go
$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/5_package/notKinkyuJi/ 
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop.go
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> eaters.go
$ go run eaters.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>/go/src/go_tutorial/5_package/notKinkyuJi/shop/shop.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> shop

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Eat</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;name is empty.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><code>/go/src/go_tutorial/5_package/notKinkyuJi/eaters.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;os&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;./shop&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;GYUDON&quot;</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> shop<span class="token punctuation">.</span><span class="token function">Eat</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;cannot eat: '%s'\n&quot;</span> <span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">//更新</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> name2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> shop<span class="token punctuation">.</span><span class="token function">Eat</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;cannot eat: '%s'\n&quot;</span> <span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">//更新</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <p>♻️ 5.2.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/5_package/notKinkyuJi/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop.go
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> eaters.go
$ go run eaters.go
GYUDON
cannot eat: <span class="token string">'name is empty.'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="真のパッケージ化"><a href="#真のパッケージ化" class="header-anchor">#</a> 🚀 真のパッケージ化</h5> <p>本章の課題では、<code>import &quot;./shop&quot;</code>のような、相対Pathによるimportを行っています。<br>
相対Pathによるimportは推奨されず、コンパイルエラーとなります。<br>
本講義では、<code>go mod</code>の説明を割愛するため、対象エラーを無効化できる環境変数<code>GO111MODULE=off</code>を指定しています。<br>
使えるmoduleを作成する場合は、<a href="https://golang.org/doc/tutorial/create-module" target="_blank" rel="noopener noreferrer">Module作成方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>や、<a href="https://golang.org/doc/tutorial/call-module-code" target="_blank" rel="noopener noreferrer">その他のModuleの呼び方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を参考に、<code>go mod</code>に沿ったパッケージ化が推奨されます。</p> <h1 id="_6-構造体-15-min"><a href="#_6-構造体-15-min" class="header-anchor">#</a> 6. 構造体 ( 15 min )</h1> <p>本章では、構造体の定義方法と、構造体に関係付ける関数（メソッド）の作成方法について、確認してもらいます。</p> <h2 id="_6-1-0-構造体とは"><a href="#_6-1-0-構造体とは" class="header-anchor">#</a> 6.1.0. 構造体とは</h2> <p>構造体は、任意の定義ずみの型を0個以上まとめることが可能な型です。<br>
例えば、既存の型では収められる量が不足する際に扱います。<br>
int64では、最大約923京(<code>9,223,372,036,854,775,807</code>) の京の桁(10^16)まで表せますが、1那由多(10^60)は、表すことができません。<br>
int64をいくつか組み合わせ、このint64は、1の位から。このint64は、垓（がい）の位から。と役割を決めていくことで、1那由多以上を表せる型を定義できます。</p> <h2 id="_6-1-構造体の定義"><a href="#_6-1-構造体の定義" class="header-anchor">#</a> 6.1. 構造体の定義</h2> <p>Go言語では、<code>type</code>から始まる形で、名前付きの型を定義できます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> <span class="token operator">&lt;</span>名称<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>型<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>構造体の定義は、型部分に、予約された表現である、<code>struct {}</code>を用い定義します。<br>
(変数に直接代入する構造体の定義方法もありますが、本講義ではふれません。)</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> <span class="token operator">&lt;</span>名称<span class="token operator">&gt;</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token punctuation">[</span><span class="token operator">&lt;</span>名前<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>型<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token comment">//要素1</span>
	<span class="token punctuation">[</span><span class="token operator">&lt;</span>名前<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>型<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token comment">//要素2</span>
	#<span class="token operator">...</span>省略
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>例えば、<a href="">6.1.0 構造体とは</a> で例に挙げたint64では桁数が不足する際の構造体をGo言語で記述すると、以下のようになります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> FantasticInt <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ichi_no_keta <span class="token builtin">int64</span>
	gai_no_keta <span class="token builtin">int64</span>
	#<span class="token operator">...</span>省略
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>構造体を変数として定義する場合は、intなどの標準型と同様、以下のように定義できます。<br>
要素にアクセスする際は、<code>&lt;変数&gt;.&lt;要素の名前&gt;</code> と指定します。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> MyInt FantasticInt

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>MyInt<span class="token punctuation">.</span>ichi_no_keta<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>MyInt<span class="token punctuation">.</span>gai_no_keta<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_6-2-構造体への関数の関連付け"><a href="#_6-2-構造体への関数の関連付け" class="header-anchor">#</a> 6.2. 構造体への関数の関連付け</h2> <p>先ほど例に挙げた<code>type FantasticInt</code>は、<code>+-*/</code> を用いて計算ができません。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> FantasticInt <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ichi_no_keta <span class="token builtin">int64</span>
	gai_no_keta <span class="token builtin">int64</span>
	#<span class="token operator">...</span>省略
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> num1 FantasticInt <span class="token operator">=</span> FantasticInt<span class="token punctuation">{</span>ichi_no_keta<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> gai_no_keta<span class="token punctuation">:</span> <span class="token number">1</span> #<span class="token operator">...</span>省略 <span class="token punctuation">}</span>
	<span class="token keyword">var</span> num2 FantasticInt <span class="token operator">=</span> FantasticInt<span class="token punctuation">{</span>ichi_no_keta<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> gai_no_keta<span class="token punctuation">:</span> <span class="token number">1</span> #<span class="token operator">...</span>省略 <span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1 <span class="token operator">+</span> num2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>これは、コーダが独自に定義した型をどのように計算するかGo言語に定義されていない為におきます。<br>
残念ながら<code>+-*/</code>を活用した計算はできませんが、処理を定義することで計算は可能となります。<br>
独自の型へ独自の処理を定義する方法は、3つあります。</p> <h3 id="_6-2-1-型を利用するスコープ上に、そのまま処理を書く"><a href="#_6-2-1-型を利用するスコープ上に、そのまま処理を書く" class="header-anchor">#</a> 6.2.1. 型を利用するスコープ上に、そのまま処理を書く</h3> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> num1 FantasticInt
	<span class="token keyword">var</span> num2 FantasticInt

	<span class="token keyword">var</span> ichi_no_keta <span class="token builtin">int64</span> <span class="token operator">=</span> num1<span class="token punctuation">.</span>ichi_no_keta <span class="token operator">+</span> num2<span class="token punctuation">.</span>ichi_no_keta
	<span class="token keyword">var</span> gai_no_keta <span class="token builtin">int64</span> <span class="token operator">=</span> num1<span class="token punctuation">.</span>gai_no_keta <span class="token operator">+</span> num2<span class="token punctuation">.</span>gai_no_keta
	#<span class="token operator">...</span>省略

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ichi_no_keta<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>gai_no_keta<span class="token punctuation">)</span>
	#<span class="token operator">...</span>省略
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_6-2-2-型を引数として利用できる関数を定義する"><a href="#_6-2-2-型を引数として利用できる関数を定義する" class="header-anchor">#</a> 6.2.2. 型を引数として利用できる関数を定義する</h3> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>num1 FantasticInt<span class="token punctuation">,</span> num2 FantasticInt<span class="token punctuation">)</span> FantasticInt <span class="token punctuation">{</span>
	<span class="token keyword">var</span> ichi_no_keta <span class="token builtin">int64</span> <span class="token operator">=</span> num1<span class="token punctuation">.</span>ichi_no_keta <span class="token operator">+</span> num2<span class="token punctuation">.</span>ichi_no_keta
	<span class="token keyword">var</span> gai_no_keta <span class="token builtin">int64</span> <span class="token operator">=</span> num1<span class="token punctuation">.</span>gai_no_keta <span class="token operator">+</span> num2<span class="token punctuation">.</span>gai_no_keta
	#<span class="token operator">...</span>省略

	<span class="token keyword">return</span> FantasticInt<span class="token punctuation">{</span>
		ichi_no_keta<span class="token punctuation">:</span> ichi_no_keta<span class="token punctuation">,</span>
		gai_no_keta<span class="token punctuation">:</span> gai_no_keta<span class="token punctuation">,</span>
		#<span class="token operator">...</span>省略
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> num1 FantasticInt
	<span class="token keyword">var</span> num2 FantasticInt
	num3 <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>
	#<span class="token operator">...</span>省略
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_6-2-3-型をレシーバ引数として関数と関連付けする"><a href="#_6-2-3-型をレシーバ引数として関数と関連付けする" class="header-anchor">#</a> 6.2.3. 型をレシーバ引数として関数と関連付けする</h3> <p>型に関数を紐付け、<code>変数.関数()</code>の形で呼び出す方法です。レシーバ引数で紐付けを行っている関数を、メソッドとも呼びます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>レシーバ引数変数名 レシーバ引数型<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span>関数名<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>引数<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>引数<span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>戻り値<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>戻り値<span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>FantasticInt</code>へ、数字を追加する、足し算メソッドを用意する場合は、以下のようになります。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span>FantasticInt<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>num FantasticInt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	self<span class="token punctuation">.</span>ichi_no_keta <span class="token operator">=</span> self<span class="token punctuation">.</span>ichi_no_keta <span class="token operator">+</span> num<span class="token punctuation">.</span>ichi_no_keta
	self<span class="token punctuation">.</span>gai_no_keta <span class="token operator">=</span> self<span class="token punctuation">.</span>gai_no_keta <span class="token operator">+</span> num<span class="token punctuation">.</span>gai_no_keta
	#<span class="token operator">...</span>省略

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> num1 FantasticInt
	<span class="token keyword">var</span> num2 FantasticInt

	num1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>先程紹介した2つでは、<strong>AとBを足し、Cという新しい領域を作成</strong>しています。<br>
今回の記法では、<strong>AにBに加える</strong> というような、レシーバ引数となった実体へ影響を与えるような書き方をしています。<br>
どちらの表現でも処理自体は行えますが、処理の効率や可読性の観点から、どちらを選ぶか判断が必要です。</p> <p>🚀 レシーバ引数で、実体に影響を与えるためには。<br>
本講義で詳細は触れませんが、実体に影響を与えるためには、リファレンス参照（ポインタのようなもの）が必要です。<br>
引数を定義する際の<code>&lt;変数&gt; &lt;型&gt;</code> を、<code>&lt;変数&gt; *&lt;型&gt;</code> のようにアスタリスクをつけることでリファレンス参照となります。</p> <h5 id="tips-go言語には、-math-big-があります"><a href="#tips-go言語には、-math-big-があります" class="header-anchor">#</a> Tips: Go言語には、&quot;math/big&quot; があります</h5> <p>int64では扱えないサイズを例に挙げ、本資料では独自の方を定義していますが、<br>
Go言語標準パッケージに、int64よりも大きいサイズを扱える、<a href="https://golang.org/pkg/math/big/" target="_blank" rel="noopener noreferrer">math/big<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>パッケージが存在します。</p> <h2 id="_6-3-牛丼屋型と、注文する関数を定義する"><a href="#_6-3-牛丼屋型と、注文する関数を定義する" class="header-anchor">#</a> 6.3. 牛丼屋型と、注文する関数を定義する</h2> <p>先ほども紹介した通り、構造体(<code>struct</code>) は、<code>任意の定義ずみの型を0個以上まとめることが可能な型</code>なため、数字桁を扱うグルーピング以外にも活用できます。<br>
牛丼屋で考えてみます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> GYUDONYA <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	reji_1  TypeOfCashRegister
	reji_2  TypeOfCashRegister

	seki_1  TypeOfChair
	seki_2  TypeOfChair
	seki_3  TypeOfChair

	chubo_1 TypeOfKitchen

	menu    <span class="token builtin">string</span>

	ZipCode <span class="token builtin">int64</span>
	#<span class="token operator">...</span>省略
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>レジや席がいくつか存在し、厨房やメニューがあることでしょう。あとは、所在の郵便番号(ZipCode)。他にも、電話番号や社員の一覧など、構成要素はまだまだありそうです。<br>
牛丼屋を完璧にシミュレーションするコードを作成したければ、もっと沢山の構成要素を意識する必要がありますが、牛丼屋を考える講義でも無く、執筆者が牛丼屋で働いたこともないので、もう少しシンプルな実習コードとします。</p> <h3 id="_6-3-1-お店で食べられる牛丼屋型を実行する"><a href="#_6-3-1-お店で食べられる牛丼屋型を実行する" class="header-anchor">#</a> 6.3.1. 💻 お店で食べられる牛丼屋型を実行する</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># COPY /go/src/go_tutorial/5_package/notKinkyuJi/eaters.go /go/src/go_tutorial/6_struct/weakShop/eaters.go</span>
<span class="token builtin class-name">:</span><span class="token comment"># COPY /go/src/go_tutorial/5_package/notKinkyuJi/shop/shop.go /go/src/go_tutorial/6_struct/weakShop/shop/shop.go</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/6_struct/weakShop/</span>

$ <span class="token function">cp</span> /go/src/go_tutorial/5_package/notKinkyuJi/eaters.go /go/src/go_tutorial/6_struct/weakShop/eaters.go
$ <span class="token function">cp</span> /go/src/go_tutorial/5_package/notKinkyuJi/shop/shop.go /go/src/go_tutorial/6_struct/weakShop/shop/shop.go
$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/6_struct/weakShop/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop.go
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> eaters.go
$ go run eaters.go
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><code>/go/src/go_tutorial/6_struct/weakShop/shop/shop.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> shop

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Gyudon <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	menu <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewGyudon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Gyudon <span class="token punctuation">{</span> <span class="token comment">//変数定義用の関数</span>
	<span class="token keyword">return</span> Gyudon<span class="token punctuation">{</span>
		menu<span class="token punctuation">:</span> <span class="token string">&quot;NegitamaGyudon&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span>Gyudon<span class="token punctuation">)</span> <span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> self<span class="token punctuation">.</span>menu <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;name is empty.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//擬似食べてる時間</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>menu<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li> <li><code>/go/src/go_tutorial/6_struct/weakShop/eaters.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;os&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;./shop&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	myshop <span class="token operator">:=</span> shop<span class="token punctuation">.</span><span class="token function">NewGyudon</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> myshop<span class="token punctuation">.</span><span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;cannot eat: '%s'\n&quot;</span> <span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul> <p>♻️ 6.3.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/6_struct/weakShop/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop.go
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> gyudon-httpd.go
$ go run eaters.go
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
NegitamaGyudon
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="_7-webアプリケーション-15-min"><a href="#_7-webアプリケーション-15-min" class="header-anchor">#</a> 7. Webアプリケーション ( 15 min )</h1> <p>本章では、これまで順番に作り上げてきたGyudon型をWebアプリケーションサーバとして起動する方法を確認してもらいます。<br>
本章までを通して、Go言語の基本的な扱い方を学習した皆さんには、最も簡単な章かもしれません。</p> <h2 id="_7-0-準備"><a href="#_7-0-準備" class="header-anchor">#</a> 7.0. 準備</h2> <p>本章以降、複数のターミナルを用い、ハンズオンいただきます。<br>
既存のコンテナに接続し利用するため、それぞれターミナルを起動し、以下コマンドを実行ください。<br>
VSCodeをお使いの方はターミナルを追加で起動してください。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it go-tutor /bin/bash

<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 2</span>
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it go-tutor /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_7-1-httpを起動する方法"><a href="#_7-1-httpを起動する方法" class="header-anchor">#</a> 7.1. httpを起動する方法</h2> <p>Go言語の標準パッケージ <a href="https://golang.org/pkg/net/http/" target="_blank" rel="noopener noreferrer">net/http<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を活用するだけで起動します。<br>
特に細かい処理に拘らず、デフォルト動作でWebアプリケーションサーバをコーディングするのであれば、呼び出す側は以下の2行だけですみます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">httphandler</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	#<span class="token operator">...</span>省略
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> httphandler<span class="token punctuation">)</span>   <span class="token comment">//どこのPathで、どんな処理をするか</span>
	http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:8080&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">//どの接続元(ホスト名:ポート)で、サーバを起動するか</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_7-2-はじめてのgo言語webアプリケーション起動"><a href="#_7-2-はじめてのgo言語webアプリケーション起動" class="header-anchor">#</a> 7.2. はじめてのGo言語Webアプリケーション起動</h2> <p>では、Webアプリケーションサーバの書き方も知ってもらったので、実際にコーディングしてもらいましょう。<br>
理由は後ほど説明しますが、本講義では、<a href="https://golang.org/pkg/net/http/" target="_blank" rel="noopener noreferrer">net/http<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>パッケージではなく、講義用の下位互換httpパッケージ(zakohttp) を参照してもらいます。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># COPY /go/src/go_tutorial/6_struct/weakShop/shop/shop.go /go/src/go_tutorial/7_webapp/weakShop/shop/shop.go</span>
<span class="token builtin class-name">:</span><span class="token comment"># COPY /go/src/go_tutorial/6_struct/weakShop/eaters.go /go/src/go_tutorial/7_webapp/weakShop/gyudon-httpd.go</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/7_webapp/weakShop/</span>

$ <span class="token function">cp</span> /go/src/go_tutorial/6_struct/weakShop/shop/shop.go /go/src/go_tutorial/7_webapp/weakShop/shop/shop.go
$ <span class="token function">cp</span> /go/src/go_tutorial/6_struct/weakShop/eaters.go /go/src/go_tutorial/7_webapp/weakShop/gyudon-httpd.go
$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/7_webapp/weakShop/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop.go
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> gyudon-httpd.go
$ go run gyudon-httpd.go


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><code>/go/src/go_tutorial/7_webapp/weakShop/shop/shop.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> shop

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>
	<span class="token string">&quot;../http&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Gyudon <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	menu <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewGyudon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Gyudon <span class="token punctuation">{</span>
	<span class="token keyword">return</span> Gyudon<span class="token punctuation">{</span>
		menu<span class="token punctuation">:</span> <span class="token string">&quot;NegitamaGyudon&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span>Gyudon<span class="token punctuation">)</span> <span class="token function">Eat</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//引数をhttpdのセッション状態を受け取れるように追加</span>
	<span class="token keyword">if</span> self<span class="token punctuation">.</span>menu <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//擬似食べてる時間</span>
	fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">&quot;'%s'\n&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>menu<span class="token punctuation">)</span> <span class="token comment">//食べた事を報告</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li> <li><code>/go/src/go_tutorial/7_webapp/weakShop/gyudon-httpd.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;./shop&quot;</span>
	<span class="token string">&quot;./http&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	myshop <span class="token operator">:=</span> shop<span class="token punctuation">.</span><span class="token function">NewGyudon</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> myshop<span class="token punctuation">.</span>Eat<span class="token punctuation">)</span>
	err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:8080&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul> <p>♻️ 7.2. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/7_webapp/weakShop/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop.go
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> gyudon-httpd.go
$ go run gyudon-httpd.go


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
<span class="token string">'NegitamaGyudon'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>💻 7.2. 後処理</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># Ctrl + C で、gyudon-httpd.goをKillしてください</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_7-3-goroutineに触れる"><a href="#_7-3-goroutineに触れる" class="header-anchor">#</a> 7.3. Goroutineに触れる</h2> <p>Go言語の特徴でも述べた(<a href="">1.1.7. 並行プログラミングが文法レベルでサポートされている</a>)通り、Go言語では並行処理が簡単にかけます。<br>
最後に、本講義で書いたWebアプリケーションサーバを用い、並行処理を体験してもらおうと思います。</p> <p>突然ですが、座席が1つしかない牛丼屋に行かれたことはありますか？<br>
執筆者は、大手牛丼チェーンの各社それなりに行きますが、今のところ座席が1つの店舗に巡り合ったことはありません。<br>
平時の店舗で、1つの座席しか無いようでは、Aさんが食べ終わるまでBさんが牛丼を食べることができず、採算取れないからでしょうか。</p> <p>ご存知の方も多いでしょうが、プログラムは、指定しない限り、処理を1つずつ順番に実行します。<br>
そのため、1つの座席しか無い牛丼屋と同じ状況が起きます。<br>
何も考えずに、HTTPサーバを開発すると、Aさんの画面が表示されるまで、Bさんの画面はずっと読み込み中でくるくる(待ち)になってしまいます。</p> <p>めちゃくちゃ美味しい隠れた名店で、1席しか無いような状況であれば、執筆者は我慢できますが、<br>
HTTPサーバで、他者の処理が終わらないと利用できないなんて、使えたものではありません。</p> <h3 id="_7-3-1-1座席なwebアプリケーションサーバ体験"><a href="#_7-3-1-1座席なwebアプリケーションサーバ体験" class="header-anchor">#</a> 7.3.1. 💻 1座席なWebアプリケーションサーバ体験</h3> <p>試しに、2つのリクエストを送ると、1つ目のリクエストが10秒、2つ目のリクエストが約20秒かかることがわかると思います。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/7_webapp/weakShop/</span>

$ go run gyudon-httpd.go


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 2</span>
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>♻️ 7.3.1. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/7_webapp/weakShop/</span>

$ go run gyudon-httpd.go
<span class="token builtin class-name">:</span><span class="token comment"># 何も出力されない場合、実行中です。続くハンズオンを実施ください</span>


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token string">'NegitamaGyudon'</span>
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>

real    0m10.036s
user    0m0.014s
sys     0m0.013s

<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 2</span>
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token string">'NegitamaGyudon'</span>
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>

real    0m18.991s
user    0m0.004s
sys     0m0.010s

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>これは、2つ目のリクエストが、1つ目のリクエストが終わるまでの待ち時間＋自身の実行時間となるためです。</p> <p>💻 7.3.1. 後処理</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># Ctrl + C で、gyudon-httpd.goをKillください</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-3-2-並行プログラミング"><a href="#_7-3-2-並行プログラミング" class="header-anchor">#</a> 7.3.2. 並行プログラミング</h3> <p>AさんとBさんに、同時に牛丼を食べてもらう方法は、簡単です。<br>
座席を2つ用意すれば良いのです。Cさん、Dさん.....と1000000人来店したら、来店と同時に座席を増やしてしまえば、誰も待たなくて良くなります。<br>
これによりDさんは、AさんBさんCさんが食べ終わるのを待つことなく、食べ始めることができます。<br>
(現実では難しいでしょうが、不思議なポッケで叶えてもらったと思ってください。)</p> <p>プログラムでも、複数の処理をおおむね同時に実行する(厳密には、したように見せる。が正しい) 並行プログラミングがあります。<br>
並行プログラミングなコードを自身で作成するためには、領域の管理を考えた数十行のコードを作成する必要があります。<br>
牛丼屋の例で考えると、座席をどう確保すべきか、どういった要素が必要か。客が離れたら座席をどのように撤去するべきか。1つしかない厨房から牛丼をどのような形で提供するか。辺りです。</p> <p>既に特徴で紹介していますが、Go言語では、Goroutine を用いることで、とても低コストに並行プログラミングを行えます。<br>
🚀 Goroutineだけではなく、本講義では触れないChannelや、GCによって、低コストに並行プログラミングができます。</p> <p>実際に、食べる処理(Eat関数) を、並行プログラミングにして、2つ目のリクエストが、1つ目のリクエストを待たなくても良いように、アップグレードしましょう</p> <h3 id="_7-3-3-並行動作するwebアプリケーションサーバ体験"><a href="#_7-3-3-並行動作するwebアプリケーションサーバ体験" class="header-anchor">#</a> 7.3.3. 💻 並行動作するWebアプリケーションサーバ体験</h3> <p><code>/go/src/go_tutorial/7_webapp/weakShop/http/zakohttp.go</code> の、<code>c.serve(self.ctx)</code> が、Eat関数を呼び出しています。<br>
ここをGoroutine化し、その先にあるEat関数を新しく誕生させた座席(Goroutine)で動作させるようにしましょう。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/7_webapp/weakShop/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> http/zakohttp.go
$ go run gyudon-httpd.go
<span class="token builtin class-name">:</span><span class="token comment"># 何も出力されない場合、実行中です。続くハンズオンを実施ください</span>


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>

<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 2</span>
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>/go/src/go_tutorial/7_webapp/weakShop/http/zakohttp.go<div class="language-go line-numbers-mode"><pre class="language-go"><code>c<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ctx<span class="token punctuation">)</span>    <span class="token comment">//Line56 もともとの書かれ方</span>
<span class="token keyword">go</span> c<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ctx<span class="token punctuation">)</span> <span class="token comment">//Line56 変更後。go と、加筆する</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p>♻️ 7.3.3. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/7_webapp/weakShop/</span>

$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> http/zakohttp.go
$ go run gyudon-httpd.go
<span class="token builtin class-name">:</span><span class="token comment"># 何も出力されない場合、実行中です。続くハンズオンを実施ください</span>


<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 1</span>
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it go-tutor /bin/bash
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
<span class="token string">'NegitamaGyudon'</span>


real    0m10.033s
user    0m0.019s
sys     0m0.009s

<span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 2</span>
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it go-tutor /bin/bash
$ <span class="token function">time</span> <span class="token function">curl</span> http://localhost:8080/
<span class="token builtin class-name">:</span><span class="token comment"># 10秒程度待機する</span>
<span class="token string">'NegitamaGyudon'</span>


real    0m10.012s
user    0m0.019s
sys     0m0.009s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>💻 7.3.3. 後処理</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># Ctrl + C で、gyudon-httpd.goをKillください</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="tips-goroutineは、注意して使いましょう"><a href="#tips-goroutineは、注意して使いましょう" class="header-anchor">#</a> Tips: Goroutineは、注意して使いましょう</h5> <p>お手軽な<code>go func(){}()</code> ですが、注意が必要です。<br>
並行動作を簡単に行えますが、並行動作に対応した処理やデータの安全性は、プログラマ自身が考え、コード化しておく必要があります。<br>
Goroutineが迷子になったり、データが壊れたり、リソースの奪い合いになったりと、危険なことが多くあります。<br>
本番サービスとして、きちんと提供する場合は、並行プログラミングを学習してから利用することをお勧めします。</p> <h3 id="_7-4-zakohttpパッケージについて"><a href="#_7-4-zakohttpパッケージについて" class="header-anchor">#</a> 7.4. zakohttpパッケージについて</h3> <p>第7章は、Go言語標準パッケージ <a href="https://golang.org/src/net/http" target="_blank" rel="noopener noreferrer">net/http<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> の以下の処理を参考に作成しています。(執筆時点最新のHEAD)</p> <p><a href="https://github.com/golang/go/blob/cb4cd9e17753b5cd8ee4cd5b1f23d46241b485f1/src/net/http/server.go#L2993" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/cb4cd9e17753b5cd8ee4cd5b1f23d46241b485f1/src/net/http/server.go#L2993<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>実は、本講義を通して、Go標準パッケージの劣化版を、Go標準パッケージに近づけるコーディングをしてもらいました。<br> <a href="https://golang.org/src/net/http" target="_blank" rel="noopener noreferrer">net/http<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> パッケージは、通信に関する処理や、同期処理、書き込み処理やハンドラの登録など、Goで触っておくと良さそうな表現が色々と存在します。<br>
腕試しをされるのであれば、zakohttpの問題を考え、アップグレードし続けてみてください。</p> <h1 id="_8-テスト-10-min"><a href="#_8-テスト-10-min" class="header-anchor">#</a> 8. テスト ( 10 min )</h1> <p>本章では、これまで作り上げてきたGyudon型にテストを追加してもらいます。</p> <h2 id="_8-1-go言語でのテストのやり方"><a href="#_8-1-go言語でのテストのやり方" class="header-anchor">#</a> 8.1. Go言語でのテストのやり方</h2> <p>Go言語にはテストをサポートする標準パッケージ <a href="https://pkg.go.dev/testing" target="_blank" rel="noopener noreferrer">testing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> があります。
そのためなにかテストフレームワークを使うのではなく、標準のライブラリを使用してテストを行うケースが多いです。</p> <p>テストは以下のコマンドだけで実行できます。
<code>./...</code>でカレントディレクトリ以下のすべてのファイルが対象となります。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ go <span class="token builtin class-name">test</span> ./<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>&lt;機能&gt;.go</code>というファイルがある時、テストは<code>&lt;機能&gt;_test.go</code>という名前のファイルに記述していきます。</p> <p>テストの関数は下のような書き出しで始めます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> Test<span class="token operator">&lt;</span>テスト名<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>このような関数のテストを書くときを考えます。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">IsTopping</span><span class="token punctuation">(</span>food <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token builtin">bool</span><span class="token punctuation">{</span>
	<span class="token keyword">switch</span> food <span class="token punctuation">{</span>
	    <span class="token keyword">case</span> <span class="token string">&quot;BeniShoga&quot;</span><span class="token punctuation">:</span>
		    <span class="token keyword">return</span> <span class="token boolean">true</span>
		
	    <span class="token keyword">case</span> <span class="token string">&quot;Egg&quot;</span><span class="token punctuation">:</span>
			retuen <span class="token boolean">true</span>
			
    <span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>簡単なテストを書くとこのようになります。
panicしたり、Errorに書き込まれなければテストは成功です。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestIsTopping</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">)</span><span class="token punctuation">{</span>
	food <span class="token operator">:=</span> <span class="token string">&quot;BeniShoga&quot;</span>
	
	<span class="token keyword">if</span> got<span class="token operator">:=</span><span class="token function">IsTopping</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>got<span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;food = %s , want&quot;</span><span class="token punctuation">,</span>got<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_8-2-テストの実行と修正"><a href="#_8-2-テストの実行と修正" class="header-anchor">#</a> 8.2. 💻 テストの実行と修正</h2> <p>では、基本的なテストのやり方を知ってもらったので、実際に試してみましょう。<br>
本講義では5章で作った関数Eatにテストを追加する形で進めます。</p> <p>手始めに関数TestGyudon_EatSimpleをいじってテストの挙動を確認してみましょう。</p> <h3 id="試してみてほしいこと"><a href="#試してみてほしいこと" class="header-anchor">#</a> 試してみてほしいこと</h3> <ol><li><code>want</code>と<code>got</code>を比較して、違っていたら<code>t.Errorf()</code>にメッセージを表示するように修正する</li> <li>テストを実行する</li> <li>文字が一致してテストが成功するパターンを試す</li> <li>文字が一致せずテストが失敗するパターンを試す</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/8_test/test/</span>

$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/8_test/test/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop_test.go
$ go <span class="token builtin class-name">test</span> ./<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>/go/src/go_tutorial/8_test/test/shop/shop_test.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestGyudon_EatSimple</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
w <span class="token operator">:=</span> bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">{</span><span class="token punctuation">}</span>
r <span class="token operator">:=</span> http<span class="token punctuation">.</span>Request<span class="token punctuation">{</span><span class="token punctuation">}</span>

gd <span class="token operator">:=</span> <span class="token function">NewGyudon</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
gd<span class="token punctuation">.</span>menu<span class="token operator">=</span><span class="token string">&quot;&lt;入れたい文字列&gt;&quot;</span>
gd<span class="token punctuation">.</span><span class="token function">Eat</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>w<span class="token punctuation">,</span> <span class="token operator">&amp;</span>r<span class="token punctuation">)</span>
<span class="token comment">/// 関数の結果を格納</span>
got <span class="token operator">:=</span> w<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/// 判定処理を書く</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <p>♻️ 8.2. 結果</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">:</span><span class="token comment"># TERMINAL 0</span>
<span class="token builtin class-name">:</span><span class="token comment"># WORKPATH /go/src/go_tutorial/8_test/test/</span>

$ <span class="token builtin class-name">cd</span> /go/src/go_tutorial/8_test/test/
$ <span class="token operator">&lt;</span>お好きなエディタ<span class="token operator">&gt;</span> shop/shop_test.go
$ go <span class="token builtin class-name">test</span> ./<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>/go/src/go_tutorial/8_test/test/shop/shop_test.go</code><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> want <span class="token operator">!=</span> got <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;want = %s, got = %s\n&quot;</span><span class="token punctuation">,</span> want<span class="token punctuation">,</span> got<span class="token punctuation">)</span>
<span class="token punctuation">}</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h2 id="_8-3-その他のテストの書き方"><a href="#_8-3-その他のテストの書き方" class="header-anchor">#</a> 8.3. 🚀 その他のテストの書き方</h2> <p>8.2.で試したテスト関数 TestGyudon_EatSimple のやり方の場合、引きすうごとにテストの関数を追加せねばならず不便です。
そのため、テスト関数 TestGyudon_Eat のように一つの関数内で複数のパターンのテストを記述することもよくあります。
時間に余裕があったり、興味があるひとはテスト関数 TestGyudon_Eat にあるテストパターンの間違いを修正したり、関数 Eat が参照する変数が空の場合のテストケースを追加してみてください。</p> <h1 id="_9-最後に-2-min"><a href="#_9-最後に-2-min" class="header-anchor">#</a> 9. 最後に ( 2 min )</h1> <p>今回は、Goを知ってもらうために、Goの概要説明、実行やコンパイル、関数や構造体、そして、Goroutineをサクッと追っていきました。<br>
今回紹介しきれていない<code>interface</code>や<code>channel</code>、<code>context</code> 辺りを学習するとよりGo言語が、選択肢としての幅が広がっていくと思います。<br>
もしGo言語をもっと知ってみたいと思っているのであれば、Goが学習できる <a href="https://go-tour-jp.appspot.com/list" target="_blank" rel="noopener noreferrer">go tour(日本語)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を、まずは一周してみることをお勧めします。<br>
基本的な構文や、Go言語の構造体の説明、先程あげた<code>interface</code>, <code>channel</code> の説明があります。(執筆時点、<code>context</code>の説明はありませんでした)</p> <p>なお、本講義外で、本講義で用いたソースコードを編集/検証することは、自由とします。<br>
いじくり回し、色々学習することも問題ありません。<br>
より素晴らしい例を見つけたら、本リポジトリにPRしていただいても大丈夫です。</p> <p>また、Go言語の構造から迫るアプローチ以外として、その他外部のコミュニティから情報を得るのも良いでしょう。</p> <ul><li>Gophers Slackの<code>#japan</code>チャンネル
<ul><li>世界中のGopherが集うSlack、その中の<code>#japan</code>に日本人Gopherが住んでいます</li></ul></li> <li><a href="https://vim-jp.org/docs/chat.html" target="_blank" rel="noopener noreferrer">vim-jp slackの#lang-goチャンネル<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>Vimコミュニティのslackですが、何故かGopher Slackの<code>#japan</code>より活発</li> <li>普通にEmacs使いの人もいるので、お使いのエディタに依らずどうぞ</li> <li><a href="https://mattn.kaoriya.net/etc/gde.htm" target="_blank" rel="noopener noreferrer">こういう人<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>がいたりします</li></ul></li> <li><a href="https://gocon.jp/" target="_blank" rel="noopener noreferrer">Go Conference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>今年はこんな状態なので開催されてませんが、例年は半年毎に開催されるGoコミュニティによるカンファレンス</li></ul></li></ul> <p>もちろん、本講義開催の講師陣に質問くださっても問題ありません。<br>
情報源はたくさんあるので、貪欲にGoを知ってみてください。<br>
ではみなさん、Let's Go!!</p> <div><hr> <span>CC BY-SA Licensed | Copyright (c) 2020, Internet Initiative Japan Inc.</span></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/iij/bootcamp/edit/master/src/server-app/go/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/6/2024, 2:15:05 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/bootcamp/assets/js/app.6d52e188.js" defer></script><script src="/bootcamp/assets/js/2.8be9fd60.js" defer></script><script src="/bootcamp/assets/js/58.03e2fa9d.js" defer></script><script src="/bootcamp/assets/js/18.1d589aab.js" defer></script><script src="/bootcamp/assets/js/17.eba33b98.js" defer></script>
  </body>
</html>
